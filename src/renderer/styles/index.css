/*
 * Arquivo principal de estilos
 */

/* Importações devem vir ANTES de qualquer regra */
@import './colors.css';

/* Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * ========================================
 * ESTILOS GLOBAIS (inline para evitar problemas de @import)
 * ========================================
 */

/* Reset e base */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body, #root {
  height: 100%;
  overflow: hidden;
}

body {
  font-family: var(--font-sans);
  background-color: var(--color-background);
  color: var(--color-text);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========================================
 * TITLEBAR CUSTOMIZADA
 * ======================================== */

.titlebar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: var(--titlebar-height);
  background: var(--color-titlebar-bg);
  border-bottom: 1px solid var(--color-border);
  user-select: none;
  flex-shrink: 0;
}

.titlebar-drag {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  height: 100%;
  padding-left: 12px;
  -webkit-app-region: drag;
  app-region: drag;
}

.titlebar-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-primary);
}

.titlebar-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-titlebar-text);
  letter-spacing: 0.3px;
}

.titlebar-controls {
  display: flex;
  height: 100%;
  -webkit-app-region: no-drag;
  app-region: no-drag;
}

.titlebar-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 46px;
  height: 100%;
  border: none;
  background: transparent;
  color: var(--color-titlebar-text);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.titlebar-btn:hover {
  background: var(--color-titlebar-btn-hover);
  color: var(--color-text);
}

.titlebar-btn-close:hover {
  background: var(--color-titlebar-close-hover);
  color: white;
}

/* ========================================
 * SCROLLBAR CUSTOMIZADA
 * ======================================== */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-border-light);
}

/* ========================================
 * FOCUS E ACESSIBILIDADE
 * ======================================== */

:focus {
  outline: none;
}

:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

::placeholder {
  color: var(--color-text-muted);
}

::selection {
  background: var(--color-primary-light);
  color: var(--color-text);
}

/* ========================================
 * ELEMENTOS BASE
 * ======================================== */

button {
  cursor: pointer;
  font-family: inherit;
  font-size: inherit;
  border: none;
  background: none;
}

button:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

input, textarea, select {
  font-family: inherit;
  font-size: inherit;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text);
  border-radius: 8px;
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

input:focus, textarea:focus, select:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

/* ========================================
 * LAYOUT PRINCIPAL
 * ======================================== */

.app-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
  background: var(--color-background);
}

.app-body {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}

.app-view {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.planner-layout {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.app-status {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: 8px;
}

.app-status-title {
  font-size: 16px;
  font-weight: 600;
}

.app-status-subtitle {
  font-size: 13px;
}

/* ========================================
 * BACKLOG
 * ======================================== */

.backlog {
  display: flex;
  flex-direction: column;
  width: var(--backlog-width);
  min-width: var(--backlog-width);
  background: var(--color-backlog-bg);
  border-right: 1px solid var(--color-border);
}

.backlog-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--color-backlog-header);
  border-bottom: 1px solid var(--color-border);
}

.backlog-header h2 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.backlog-count {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
  padding: 0 8px;
  background: var(--color-primary-light);
  color: var(--color-primary);
  font-size: 12px;
  font-weight: 600;
  border-radius: 12px;
}

.backlog-input-container {
  padding: 12px;
  border-bottom: 1px solid var(--color-border);
}

.backlog-input-wrapper {
  display: flex;
  gap: 8px;
}

.backlog-input {
  flex: 1;
  padding: 10px 14px;
  font-size: 14px;
}

.backlog-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--color-primary);
  color: white;
  border-radius: 8px;
  font-size: 20px;
  font-weight: 500;
  transition: all var(--transition-fast);
}

.backlog-add-btn:hover:not(:disabled) {
  background: var(--color-primary-hover);
  transform: translateY(-1px);
}

.backlog-add-btn:disabled {
  background: var(--color-surface-light);
  color: var(--color-text-muted);
}

.backlog-list {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
}

.backlog-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 16px;
  text-align: center;
  color: var(--color-text-muted);
}

.backlog-empty-icon {
  font-size: 32px;
  margin-bottom: 12px;
  opacity: 0.5;
}

.backlog-legend {
  padding: 10px 12px;
  border-top: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.backlog-legend-section {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.backlog-legend-title {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-muted);
}

.backlog-legend-items {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.backlog-legend-item {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  color: var(--color-text-secondary);
}

.backlog-legend-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  flex-shrink: 0;
}

.backlog-legend-icon {
  width: 12px;
  height: 12px;
  flex-shrink: 0;
  display: flex;
}

.backlog-legend-icon svg {
  width: 100%;
  height: 100%;
}

/* ========================================
 * GRADE SEMANAL
 * ======================================== */

.week-grid {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--color-background);
}

.week-grid-header {
  display: grid;
  /* minmax(0, 1fr) evita que o conteúdo (ex: eventos) force larguras diferentes por coluna */
  grid-template-columns: var(--period-label-width) repeat(7, minmax(0, 1fr));
  background: var(--color-background-secondary);
  border-bottom: 1px solid var(--color-border);
  flex-shrink: 0;
}

.week-grid-corner {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
  border-right: 1px solid var(--color-border);
}

.week-grid-day-header {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 14px 8px;
  border-right: 1px solid var(--color-border);
  flex-direction: column;
  gap: 2px;
  min-width: 0;
  transition: background var(--transition-fast);
}

.week-grid-day-header.is-today {
  background: var(--color-primary-light);
}

.week-grid-day-header.is-today .week-grid-day-label {
  color: var(--color-primary);
}

.week-grid-day-header.is-today .week-grid-day-date {
  color: var(--color-primary);
}

.week-grid-day-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  border-radius: 999px;
  background: var(--color-background-tertiary);
  color: var(--color-text-secondary);
  font-size: 10px;
  font-weight: 700;
}

.week-grid-day-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.week-grid-day-date {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-muted);
  letter-spacing: 0.2px;
}

.week-grid-day-date-row {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.week-grid-day-events {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  min-height: 10px;
}

.week-grid-day-event-dot {
  width: 7px;
  height: 7px;
  border-radius: 999px;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);
}

.week-grid-day-header:last-child {
  border-right: none;
}

.week-grid-body {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: auto;
}

.week-grid-row {
  display: grid;
  grid-template-columns: var(--period-label-width) repeat(7, minmax(0, 1fr));
  flex: 1;
  min-height: var(--cell-min-height);
  border-bottom: 1px solid var(--color-border);
}

.week-grid-row:last-child {
  border-bottom: none;
}

/* ========================================
 * LABELS DOS PERÍODOS
 * ======================================== */

.period-label {
  display: flex;
  align-items: center;
  justify-content: center;
  border-right: 1px solid var(--color-border);
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.period-label-morning {
  background: var(--color-morning);
  color: var(--color-morning-text);
  border-left: 3px solid var(--color-morning-border);
}

.period-label-afternoon {
  background: var(--color-afternoon);
  color: var(--color-afternoon-text);
  border-left: 3px solid var(--color-afternoon-border);
}

.period-label-night {
  background: var(--color-night);
  color: var(--color-night-text);
  border-left: 3px solid var(--color-night-border);
}

/* ========================================
 * CÉLULAS DA GRADE
 * ======================================== */

.grid-cell {
  display: flex;
  flex-direction: column;
  padding: 8px;
  border-right: 1px solid var(--color-border);
  background: var(--color-background);
  transition: background-color var(--transition-fast);
  min-height: 100%;
  gap: 6px;
  min-width: 0;
  overflow: hidden;
}

.cell-cards {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
  flex: 1;
}

.grid-cell.cell-compact {
  padding: 5px;
  gap: 4px;
}

.grid-cell.cell-compact .cell-events {
  gap: 1px;
}

.grid-cell.cell-compact .cell-cards {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 4px;
}

.cell-events {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.cell-event {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border: none;
  border-left: 3px solid var(--color-primary);
  border-radius: 0 4px 4px 0;
  background: rgba(255, 255, 255, 0.04);
  color: var(--color-text);
  font-size: 10.5px;
  line-height: 1.3;
  cursor: pointer;
  text-align: left;
  width: 100%;
  max-width: 100%;
  min-width: 0;
}

.cell-event:hover {
  background: rgba(255, 255, 255, 0.1);
}

.cell-event:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.cell-event-time {
  color: var(--color-text-muted);
  flex: 0 0 auto;
  width: 42px;
  min-width: 0;
  font-size: 10px;
  font-variant-numeric: tabular-nums;
}

.cell-event-title {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 0;
}

.cell-event-more {
  font-size: 10px;
  color: var(--color-text-muted);
  padding: 1px 6px;
  cursor: pointer;
  transition: color var(--transition-fast);
}

.cell-event-more:hover {
  color: var(--color-primary);
}

.cell-pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  margin-top: auto;
  padding-top: 2px;
}

.cell-pagination-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border: 1px solid var(--color-border);
  border-radius: 5px;
  background: var(--color-surface);
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
  padding: 0;
}

.cell-pagination-arrow:hover:not(:disabled) {
  background: var(--color-surface-hover);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.cell-pagination-arrow:disabled {
  opacity: 0.25;
  cursor: default;
}

.cell-pagination-info {
  font-size: 10px;
  font-weight: 600;
  color: var(--color-text-muted);
  font-variant-numeric: tabular-nums;
  min-width: 22px;
  text-align: center;
}

.cell-empty-hint {
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  color: var(--color-text-muted);
  opacity: 0;
  transition: opacity var(--transition-fast);
  font-size: 18px;
}

.grid-cell:hover .cell-empty-hint {
  opacity: 0.3;
}

.grid-cell:last-child {
  border-right: none;
}

.grid-cell.period-morning {
  background: var(--color-morning);
}

.grid-cell.period-afternoon {
  background: var(--color-afternoon);
}

.grid-cell.period-night {
  background: var(--color-night);
}

.grid-cell.drag-over {
  background: var(--color-drag-highlight) !important;
  box-shadow: inset 0 0 0 2px var(--color-primary);
}

/* ========================================
 * CARDS
 * ======================================== */

.card {
  padding: 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--card-border-radius);
  cursor: grab;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-card);
}

.card-compact {
  padding: 4px 6px;
  cursor: grab;
  border-radius: 8px;
}

.card-compact .card-title {
  font-size: 11px;
  line-height: 1.2;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card-compact .card-indicators {
  gap: 4px;
  margin-top: 2px;
}

.card-compact .card-indicator {
  font-size: 9px;
}

.card-compact .card-indicator svg {
  width: 10px;
  height: 10px;
}

.card:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
  transform: translateY(-2px);
  box-shadow: var(--shadow-card-hover);
}

.card.card-compact:hover {
  transform: none;
}

.card:active {
  cursor: grabbing;
}

.card.dragging {
  opacity: 0.5;
  transform: scale(1.02);
  box-shadow: var(--shadow-drag);
}

.card-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  line-height: 1.4;
  word-break: break-word;
}

.card-indicators {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
}

.card-indicator {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--color-text-muted);
}

.card-indicator svg {
  width: 12px;
  height: 12px;
}

.card-indicator-date {
  color: var(--color-primary);
  font-weight: 500;
}

.card-indicator-time {
  color: var(--color-text-muted);
  font-weight: 500;
}

.card-indicator-nodate {
  color: var(--color-text-muted);
  font-weight: 500;
}

.card-overlay {
  padding: 12px;
  background: var(--color-surface);
  border: 2px solid var(--color-primary);
  border-radius: var(--card-border-radius);
  box-shadow: var(--shadow-drag), var(--shadow-glow);
  opacity: 0.95;
}

.card-overlay .card-title {
  color: var(--color-text);
}

.card-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* ========================================
 * MODAL
 * ======================================== */

.modal-backdrop {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  z-index: 200;
  animation: fadeIn var(--transition-normal);
}

.modal {
  width: 100%;
  max-width: 600px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--modal-border-radius);
  box-shadow: var(--shadow-modal);
  animation: scaleIn var(--transition-normal);
  overflow: hidden;
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid var(--color-border);
}

.modal-header h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.modal-close-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  color: var(--color-text-muted);
  transition: all var(--transition-fast);
}

.modal-close-btn:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
}

.modal-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  border-top: 1px solid var(--color-border);
  background: var(--color-surface);
}

/* ========================================
 * BUSCA RAPIDA (CTRL+K)
 * ======================================== */

.quick-modal {
  max-width: 720px;
}

.quick-results {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.quick-result {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  text-align: left;
  transition: all var(--transition-fast);
}

.quick-result:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.quick-result.is-active {
  background: var(--color-primary-light);
  border-color: transparent;
}

.quick-result-title {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.quick-kind {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: var(--color-text-muted);
  background: var(--color-background-secondary);
  flex-shrink: 0;
}

.quick-result.is-active .quick-kind {
  color: var(--color-primary);
  border-color: rgba(0, 0, 0, 0.08);
}

.quick-title-text {
  font-size: 13px;
  font-weight: 700;
  color: var(--color-text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.quick-result-meta {
  font-size: 12px;
  color: var(--color-text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.quick-empty {
  padding: 10px 12px;
  border: 1px dashed var(--color-border);
  border-radius: 14px;
  color: var(--color-text-muted);
  font-size: 13px;
  text-align: center;
}

/* ========================================
 * FORMULÁRIOS NO MODAL
 * ======================================== */

.form-group {
  margin-bottom: 20px;
}

.form-group:last-child {
  margin-bottom: 0;
}

.form-label {
  display: block;
  margin-bottom: 8px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.form-input {
  width: 100%;
  padding: 12px 16px;
  font-size: 15px;
}

.form-input-date {
  width: auto;
  min-width: 160px;
}

.form-date-row {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
}

.form-date-time {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.form-input-time {
  width: auto;
  min-width: 130px;
}

.form-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.form-checkbox input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--color-primary);
  cursor: pointer;
}

.form-checkbox-label {
  font-size: 14px;
  color: var(--color-text);
}

.form-hint {
  margin-top: 8px;
  font-size: 12px;
  color: var(--color-text-muted);
}

.form-input-group {
  display: flex;
  align-items: center;
  gap: 8px;
}

.form-error {
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid rgba(239, 68, 68, 0.35);
  background: rgba(239, 68, 68, 0.12);
  color: var(--color-danger);
  font-size: 13px;
  color: #fecaca;
  font-size: 12px;
  font-weight: 600;
}

.period-toggle {
  display: inline-flex;
  gap: 6px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.period-toggle-btn {
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  font-weight: 700;
  transition: all var(--transition-fast);
}

.period-toggle-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.period-toggle-btn.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

/* ========================================
 * BOTÕES
 * ======================================== */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 20px;
  font-size: 14px;
  font-weight: 500;
  border-radius: 8px;
  transition: all var(--transition-fast);
}

.btn-primary {
  background: var(--color-primary);
  color: white;
}

.btn-primary:hover:not(:disabled) {
  background: var(--color-primary-hover);
}

.btn-secondary {
  background: var(--color-surface);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.btn-secondary:hover:not(:disabled) {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.btn-danger {
  background: transparent;
  color: var(--color-danger);
  border: 1px solid var(--color-danger);
}

.btn-danger:hover:not(:disabled) {
  background: var(--color-danger);
  color: white;
}

.btn-danger.btn-confirm {
  background: var(--color-danger);
  color: white;
}

/* ========================================
 * EDITOR WYSIWYG
 * ======================================== */

.editor-container {
  border: 1px solid var(--color-border);
  border-radius: 12px;
  overflow: hidden;
  background: var(--color-surface);
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.editor-container:focus-within {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

.editor-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 10px 12px;
  background: var(--color-background-tertiary);
  border-bottom: 1px solid var(--color-border);
  position: relative;
  z-index: 10;
  overflow: visible;
}

.editor-toolbar-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
  padding: 0 10px;
  font-size: 13px;
  color: var(--color-text-secondary);
  border-radius: 6px;
  transition: all var(--transition-fast);
}

.editor-toolbar-btn:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.editor-toolbar-btn.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

.editor-toolbar-divider {
  width: 1px;
  height: 24px;
  margin: 0 4px;
  background: var(--color-border);
  align-self: center;
}

.tiptap-editor {
  min-height: 200px;
  max-height: 300px;
  overflow-y: auto;
  padding: 16px;
}

.tiptap-editor .ProseMirror {
  outline: none;
  min-height: 160px;
  color: var(--color-text);
  font-size: 15px;
  line-height: 1.6;
}

.tiptap-editor .ProseMirror p {
  margin: 0 0 12px 0;
}

.tiptap-editor .ProseMirror p:last-child {
  margin-bottom: 0;
}

.tiptap-editor .ProseMirror ul,
.tiptap-editor .ProseMirror ol {
  padding-left: 24px;
  margin: 12px 0;
}

.tiptap-editor .ProseMirror li {
  margin: 6px 0;
}

.tiptap-editor .ProseMirror li::marker {
  color: var(--color-text-muted);
}

.tiptap-editor .ProseMirror strong {
  font-weight: 600;
  color: var(--color-text);
}

.tiptap-editor .ProseMirror em {
  font-style: italic;
}

.tiptap-editor .ProseMirror s {
  text-decoration: line-through;
  color: var(--color-text-muted);
}

.tiptap-editor .ProseMirror code {
  background: var(--color-background-tertiary);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'Fira Code', 'Consolas', monospace;
  font-size: 0.9em;
  color: var(--color-primary);
}

.tiptap-editor .ProseMirror blockquote {
  border-left: 3px solid var(--color-primary);
  margin: 12px 0;
  padding-left: 16px;
  color: var(--color-text-secondary);
  font-style: italic;
}

.tiptap-editor .ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  color: var(--color-text-muted);
  pointer-events: none;
  float: left;
  height: 0;
}

/* ========================================
 * EDITOR AVANÇADO - Extensões extras
 * ======================================== */

/* Toolbar full mode */
.editor-toolbar-full {
  flex-wrap: wrap;
  gap: 3px;
  padding: 8px 10px;
}

.editor-toolbar-btn-wide {
  min-width: 60px;
  gap: 2px;
  display: inline-flex;
  align-items: center;
}

.editor-toolbar-btn-danger {
  color: var(--color-danger) !important;
  font-size: 11px;
  font-weight: 600;
}

.editor-toolbar-btn-danger:hover {
  background: rgba(239, 68, 68, 0.12) !important;
}

.editor-toolbar-color-bar {
  display: block;
  width: 14px;
  height: 3px;
  border-radius: 1px;
  margin-top: 1px;
}

/* Dropdown / Popover genérico */
.editor-toolbar-dropdown {
  position: relative;
  display: inline-flex;
}

.editor-toolbar-dropdown-menu {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  z-index: 200;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 4px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  min-width: 150px;
}

.editor-toolbar-dropdown-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 4px;
  font-size: 13px;
  width: 100%;
  color: var(--color-text);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: background var(--transition-fast);
}

.editor-toolbar-dropdown-item:hover {
  background: var(--color-surface-hover);
}

.editor-toolbar-dropdown-item.active {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

/* Color picker */
.editor-color-picker {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  z-index: 200;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
  display: grid;
  grid-template-columns: repeat(5, 24px);
  gap: 4px;
}

.editor-color-swatch {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  border: 2px solid transparent;
  cursor: pointer;
  transition: border-color var(--transition-fast), transform var(--transition-fast);
  padding: 0;
}

.editor-color-swatch:hover {
  border-color: var(--color-text-muted);
  transform: scale(1.15);
}

.editor-color-swatch.active {
  border-color: var(--color-primary);
}

/* Link / Image popover */
.editor-link-popover {
  position: absolute;
  top: calc(100% + 6px);
  left: auto;
  right: 0;
  z-index: 200;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 10px 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  display: flex;
  gap: 8px;
  align-items: center;
  white-space: nowrap;
}

.editor-link-popover .form-input {
  font-size: 13px;
  padding: 6px 10px;
  width: 240px;
  border-radius: 6px;
}

.btn-sm {
  padding: 4px 10px !important;
  font-size: 12px !important;
}

/* Table picker */
.editor-table-picker {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  z-index: 200;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
}

.editor-table-picker-label {
  font-size: 11px;
  color: var(--color-text-muted);
  margin-bottom: 6px;
  text-align: center;
}

.editor-table-grid {
  display: grid;
  grid-template-columns: repeat(5, 22px);
  gap: 3px;
}

.editor-table-cell {
  width: 22px;
  height: 22px;
  border: 1px solid var(--color-border);
  border-radius: 3px;
  cursor: pointer;
  background: transparent;
  padding: 0;
  transition: all var(--transition-fast);
}

.editor-table-cell:hover {
  border-color: var(--color-primary);
}

.editor-table-cell.active {
  background: var(--color-primary-light);
  border-color: var(--color-primary);
}

/* ---- Task List ---- */
.tiptap-editor .ProseMirror ul[data-type="taskList"] {
  list-style: none;
  padding-left: 0;
  margin: 8px 0;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] li {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  margin: 4px 0;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] li > label {
  flex-shrink: 0;
  margin-top: 3px;
  display: flex;
  align-items: center;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  border: 2px solid var(--color-border-light, var(--color-border));
  border-radius: 4px;
  cursor: pointer;
  transition: all var(--transition-fast);
  background: transparent;
  position: relative;
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:checked {
  background: var(--color-primary);
  border-color: var(--color-primary);
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  left: 4px;
  top: 1px;
  width: 5px;
  height: 9px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.tiptap-editor .ProseMirror ul[data-type="taskList"] li[data-checked="true"] > div > p {
  text-decoration: line-through;
  color: var(--color-text-muted);
}

/* ---- Tabelas ---- */
.tiptap-editor .ProseMirror table {
  border-collapse: collapse;
  table-layout: fixed;
  width: 100%;
  margin: 16px 0;
  overflow: hidden;
}

.tiptap-editor .ProseMirror table td,
.tiptap-editor .ProseMirror table th {
  border: 1px solid var(--color-border);
  padding: 8px 12px;
  min-width: 80px;
  vertical-align: top;
  position: relative;
}

.tiptap-editor .ProseMirror table th {
  background: var(--color-background-tertiary);
  font-weight: 600;
  font-size: 13px;
}

.tiptap-editor .ProseMirror table td p,
.tiptap-editor .ProseMirror table th p {
  margin: 0;
}

.tiptap-editor .ProseMirror table .selectedCell::after {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--color-primary-light);
  pointer-events: none;
  z-index: 1;
}

.tiptap-editor .ProseMirror .column-resize-handle {
  position: absolute;
  right: -2px;
  top: 0;
  bottom: 0;
  width: 4px;
  background: var(--color-primary);
  cursor: col-resize;
  z-index: 10;
}

.tiptap-editor .ProseMirror .tableWrapper {
  overflow-x: auto;
  margin: 12px 0;
}

.tiptap-editor .ProseMirror table .resize-cursor {
  cursor: col-resize;
}

/* ---- Highlight / Mark ---- */
.tiptap-editor .ProseMirror mark {
  background-color: #fef08a;
  border-radius: 2px;
  padding: 1px 2px;
  box-decoration-break: clone;
}

/* ---- Underline ---- */
.tiptap-editor .ProseMirror u {
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* ---- Subscript / Superscript ---- */
.tiptap-editor .ProseMirror sub {
  font-size: 0.75em;
}

.tiptap-editor .ProseMirror sup {
  font-size: 0.75em;
}

/* ---- Image ---- */
.tiptap-editor .ProseMirror img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 12px 0;
  display: block;
}

.tiptap-editor .ProseMirror img.ProseMirror-selectednode {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* ---- Heading styles melhorados ---- */
.tiptap-editor .ProseMirror h1 {
  font-size: 1.8em;
  font-weight: 700;
  margin: 0.6em 0 0.4em;
  line-height: 1.3;
}

.tiptap-editor .ProseMirror h2 {
  font-size: 1.4em;
  font-weight: 600;
  margin: 0.5em 0 0.3em;
  line-height: 1.35;
}

.tiptap-editor .ProseMirror h3 {
  font-size: 1.15em;
  font-weight: 600;
  margin: 0.4em 0 0.25em;
  line-height: 1.4;
}

/* ---- Code block melhorado ---- */
.tiptap-editor .ProseMirror pre {
  background: var(--color-background-tertiary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 16px;
  margin: 12px 0;
  overflow-x: auto;
}

.tiptap-editor .ProseMirror pre code {
  background: none;
  padding: 0;
  border-radius: 0;
  color: var(--color-text);
  font-family: 'Fira Code', 'Consolas', 'Monaco', monospace;
  font-size: 0.88em;
  line-height: 1.6;
}

/* ---- Horizontal rule ---- */
.tiptap-editor .ProseMirror hr {
  border: none;
  border-top: 2px solid var(--color-border);
  margin: 20px 0;
}

/* ---- Link ---- */
.tiptap-editor .ProseMirror .editor-link,
.tiptap-editor .ProseMirror a {
  color: var(--color-primary);
  text-decoration: underline;
  text-underline-offset: 2px;
  cursor: pointer;
}

.tiptap-editor .ProseMirror a:hover {
  text-decoration-thickness: 2px;
}

/* ========================================
 * ANIMAÇÕES
 * ======================================== */

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
 * UTILITÁRIOS
 * ======================================== */

.drag-over {
  background: var(--color-drag-highlight) !important;
}

/* ========================================
 * NAV INTERNA
 * ======================================== */

.app-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 48px;
  padding: 0 16px;
  background: var(--color-background-secondary);
  border-bottom: 1px solid var(--color-border);
  flex-shrink: 0;
  min-width: 0;
}

.app-nav-tabs {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  min-width: 0;
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-width: thin;
  scrollbar-color: var(--color-border) transparent;
  -ms-overflow-style: auto;
  padding-right: 8px;
}

.app-nav-tabs::-webkit-scrollbar {
  height: 4px;
}

.app-nav-tabs::-webkit-scrollbar-track {
  background: transparent;
}

.app-nav-tabs::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 2px;
}

.app-nav-tabs::-webkit-scrollbar-thumb:hover {
  background: var(--color-border-light);
}

.app-nav-actions {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
  margin-left: 16px;
}

.app-nav-tab,
.app-nav-action {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  transition: all var(--transition-fast);
  white-space: nowrap;
  flex-shrink: 0;
  min-width: fit-content;
}

.app-nav-tab:hover:not(:disabled),
.app-nav-action:hover:not(:disabled) {
  background: var(--color-surface);
  color: var(--color-text);
  border-color: var(--color-border);
}

.app-nav-tab.is-active,
.app-nav-action.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

.app-nav-tab:disabled,
.app-nav-action:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.app-nav-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.app-nav-action-settings {
  min-width: 88px;
  justify-content: center;
}

.app-nav-settings-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

/* ========================================
 * NAV DROPDOWN
 * ======================================== */

.nav-dropdown-wrapper {
  position: relative;
}

.nav-dropdown-arrow {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: 4px;
  transition: transform var(--transition-fast);
}

.app-nav-tab.is-open .nav-dropdown-arrow {
  transform: rotate(180deg);
}

.nav-dropdown {
  position: fixed;
  z-index: 1000;
  min-width: 200px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  padding: 4px;
  margin-top: 4px;
  animation: slideIn var(--transition-normal);
}

.nav-dropdown-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 12px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  border-radius: 6px;
  border: none;
  background: transparent;
  transition: all var(--transition-fast);
  text-align: left;
  cursor: pointer;
}

.nav-dropdown-item:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.nav-dropdown-item.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

.nav-dropdown-item-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 16px;
  height: 16px;
}

.nav-dropdown-item-label {
  flex: 1;
}

/* ========================================
 * ATALHOS
 * ======================================== */

.shortcuts-layout {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.shortcut-folders {
  display: flex;
  flex-direction: column;
  width: var(--backlog-width);
  min-width: var(--backlog-width);
  background: var(--color-backlog-bg);
  border-right: 1px solid var(--color-border);
}

.shortcut-folders-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--color-backlog-header);
  border-bottom: 1px solid var(--color-border);
}

.shortcut-folders-header h2 {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.shortcut-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
  padding: 0 8px;
  background: var(--color-primary-light);
  color: var(--color-primary);
  font-size: 12px;
  font-weight: 600;
  border-radius: 12px;
}

.shortcut-folders-add {
  padding: 12px;
  border-bottom: 1px solid var(--color-border);
}

.shortcut-input-wrapper {
  display: flex;
  gap: 8px;
}

.shortcut-input {
  flex: 1;
  padding: 10px 12px;
  font-size: 13px;
}

.shortcut-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--color-primary);
  color: white;
  border-radius: 8px;
  font-size: 20px;
  font-weight: 500;
  transition: all var(--transition-fast);
}

.shortcut-add-btn:hover:not(:disabled) {
  background: var(--color-primary-hover);
  transform: translateY(-1px);
}

.shortcut-add-btn:disabled {
  background: var(--color-surface-light);
  color: var(--color-text-muted);
}

.shortcut-folder-list {
  flex: 1;
  overflow-y: auto;
  padding: 6px;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.shortcut-tree-separator {
  height: 1px;
  background: var(--color-border);
  margin: 4px 8px;
}

/* VS Code-style tree items */
.shortcut-tree-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  padding: 6px 10px;
  background: transparent;
  color: var(--color-text);
  border: 1px solid transparent;
  border-radius: 6px;
  font-size: 13px;
  transition: background var(--transition-fast);
  width: 100%;
}

.shortcut-tree-item-label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
}

.shortcut-tree-item-label > span:last-child {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.shortcut-tree-chevron {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  color: var(--color-text-muted);
  cursor: pointer;
  flex-shrink: 0;
}

.shortcut-folder-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  flex-shrink: 0;
}

.shortcut-tree-item:hover {
  background: var(--color-surface-hover);
}

.shortcut-tree-item.drag-over {
  background: var(--color-drag-highlight);
  border-color: var(--color-primary);
}

/* Tree row with actions on hover */
.shortcut-tree-row {
  display: flex;
  align-items: center;
  gap: 2px;
}

.shortcut-tree-row .shortcut-tree-item {
  flex: 1;
  min-width: 0;
}

.shortcut-tree-row.is-active .shortcut-tree-item {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

.shortcut-tree-row.is-active .shortcut-folder-icon {
  color: var(--color-primary);
}

.shortcut-tree-row-actions {
  display: none;
  align-items: center;
  gap: 2px;
  flex-shrink: 0;
}

.shortcut-tree-row:hover .shortcut-tree-row-actions {
  display: flex;
}

/* Tree edit inline */
.shortcut-tree-edit {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
}

.shortcut-tree-edit .shortcut-input {
  flex: 1;
  padding: 4px 8px;
  font-size: 13px;
}

.shortcut-tree-edit-actions {
  display: flex;
  gap: 2px;
}

.shortcut-folder-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  font-size: 10px;
  font-weight: 700;
  background: var(--color-background-tertiary);
  color: var(--color-text-muted);
  border-radius: 999px;
  flex-shrink: 0;
}

/* Folder drag overlay */
.shortcut-drag-folder-overlay {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  background: var(--color-surface);
  border: 2px solid var(--color-primary);
  border-radius: 8px;
  box-shadow: var(--shadow-drag), var(--shadow-glow);
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  white-space: nowrap;
}

.shortcut-icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 6px;
  color: var(--color-text-muted);
  background: transparent;
  border: 1px solid transparent;
  transition: all var(--transition-fast);
}

.shortcut-icon-btn:hover {
  color: var(--color-text);
  background: var(--color-surface-hover);
}

.shortcut-icon-btn-sm {
  width: 22px;
  height: 22px;
  border-radius: 4px;
}

.shortcuts-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.shortcuts-header {
  padding: 16px 24px;
  border-bottom: 1px solid var(--color-border);
  background: var(--color-background-secondary);
}

.shortcuts-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.shortcuts-header h2 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 4px;
}

.shortcuts-header p {
  font-size: 13px;
  color: var(--color-text-secondary);
}

/* View toggle (grid / list) */
.shortcut-view-toggle {
  display: inline-flex;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
}

.shortcut-view-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: var(--color-surface);
  color: var(--color-text-muted);
  border: none;
  transition: all var(--transition-fast);
}

.shortcut-view-btn:hover {
  background: var(--color-surface-hover);
}

.shortcut-view-btn.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

/* Add shortcut form */
.shortcut-form {
  padding: 16px 24px;
  border-bottom: 1px solid var(--color-border);
  background: var(--color-background);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.shortcut-form-mode {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.shortcut-mode-btn {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  font-weight: 700;
  transition: all var(--transition-fast);
}

.shortcut-mode-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.shortcut-mode-btn.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

.shortcut-bulk-textarea {
  resize: vertical;
  min-height: 120px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 12px;
  line-height: 1.4;
  padding: 12px;
}

.shortcut-form-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.shortcut-form-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  flex: 1;
  min-width: 180px;
}

.shortcut-form-field.stretch {
  flex: 2;
  min-width: 280px;
}

.shortcut-form-actions {
  display: flex;
  align-items: flex-end;
}

.shortcut-auto-title {
  font-size: 12px;
  color: var(--color-text-muted);
}

/* Selection toolbar */
.shortcut-selection-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 24px;
  background: var(--color-primary-light);
  border-bottom: 1px solid var(--color-border);
  flex-wrap: wrap;
}

.shortcut-selection-count {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-primary);
  white-space: nowrap;
}

.shortcut-sel-separator {
  width: 1px;
  height: 20px;
  background: var(--color-border);
  flex-shrink: 0;
}

.shortcut-sel-btn {
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 600;
  border-radius: 6px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.shortcut-sel-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.shortcut-sel-btn-danger {
  background: #ef4444;
  color: white;
  border-color: #ef4444;
}

.shortcut-sel-btn-danger:hover {
  background: #dc2626;
  border-color: #dc2626;
}

.shortcut-sel-select {
  padding: 4px 8px;
  font-size: 12px;
  min-width: 140px;
  border-radius: 6px;
}

/* Card grid */
.shortcut-grid {
  flex: 1;
  overflow-y: auto;
  padding: 14px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 8px;
  align-content: start;
}

/* Card list */
.shortcut-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px 14px;
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-content: start;
}

.shortcut-list .shortcut-card {
  border-radius: 8px;
  padding: 6px 10px;
}

.shortcut-list .shortcut-card-title {
  -webkit-line-clamp: 1;
}

/* Card */
.shortcut-card {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  transition: background var(--transition-fast), border-color var(--transition-fast);
}

.shortcut-card:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.shortcut-card-wrapper.is-selected .shortcut-card {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-glow);
}

.shortcut-card-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.shortcut-favicon {
  width: 22px;
  height: 22px;
  border-radius: 7px;
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
}

.shortcut-favicon img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.shortcut-favicon-fallback {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
}

.shortcut-favicon-fallback svg {
  width: 14px;
  height: 14px;
}

.shortcut-builtin svg {
  width: 14px;
  height: 14px;
  color: var(--color-text-muted);
}

.shortcut-emoji {
  font-size: 14px;
  line-height: 1;
}

.shortcut-card-info {
  flex: 1;
  min-width: 0;
}

.shortcut-card-title {
  font-size: 13px;
  font-weight: 600;
  line-height: 1.25;
  word-break: break-word;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.shortcut-card-url {
  font-size: 11px;
  color: var(--color-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 1px;
}

.shortcut-card-actions {
  display: flex;
  align-items: center;
  gap: 2px;
  flex-shrink: 0;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.shortcut-card:hover .shortcut-card-actions {
  opacity: 1;
}

/* YouTube embed preview */
.shortcut-embed-preview {
  position: relative;
  border-radius: 6px;
  overflow: hidden;
  margin-top: 4px;
  aspect-ratio: 16 / 9;
  background: var(--color-background-secondary);
  cursor: pointer;
}

.shortcut-embed-thumb {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.shortcut-embed-play {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.3);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.shortcut-embed-preview:hover .shortcut-embed-play {
  opacity: 1;
}

/* ========================================
 * MODAL - ICON PICKER (ATALHOS)
 * ======================================== */

.icon-mode-row {
  display: inline-flex;
  gap: 6px;
  flex-wrap: wrap;
}

.icon-mode-btn {
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  font-weight: 800;
  transition: all var(--transition-fast);
}

.icon-mode-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.icon-mode-btn.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

.icon-preview {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  font-size: 16px;
}

.icon-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 8px;
}

.icon-tile {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  text-align: left;
  transition: all var(--transition-fast);
}

.icon-tile:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.icon-tile.is-active {
  background: var(--color-primary-light);
  border-color: transparent;
  color: var(--color-primary);
}

.icon-tile-svg {
  width: 24px;
  height: 24px;
  border-radius: 10px;
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  flex-shrink: 0;
}

.icon-tile-svg svg {
  width: 14px;
  height: 14px;
}

.icon-tile-label {
  font-size: 12px;
  font-weight: 800;
  color: var(--color-text);
}

.shortcut-copied {
  font-size: 12px;
  color: var(--color-success);
}

.shortcut-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 40px;
  color: var(--color-text-muted);
  border: 1px dashed var(--color-border);
  border-radius: 16px;
}

.shortcut-empty-title {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 6px;
  color: var(--color-text);
}

.shortcut-empty-subtitle {
  font-size: 13px;
}

/* ========================================
 * PATHS — Split Layout
 * ======================================== */

.paths-split {
  flex: 1;
  display: flex;
  overflow: hidden;
  background: var(--color-background);
}

/* Sidebar */
.paths-sidebar {
  width: 300px;
  min-width: 300px;
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  overflow: hidden;
}

.paths-sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 16px 12px;
}

.paths-sidebar-header h2 {
  font-size: 16px;
  font-weight: 700;
}

.paths-sidebar-count {
  font-size: 11px;
  font-weight: 700;
  background: var(--color-primary);
  color: #fff;
  min-width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  padding: 0 6px;
}

.paths-sidebar-filter {
  padding: 0 12px 10px;
}

.paths-sidebar-filter-input {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-surface);
  color: var(--color-text-muted);
}

.paths-sidebar-filter-input svg {
  flex-shrink: 0;
  opacity: 0.5;
}

.paths-sidebar-search {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--color-text);
  font-size: 13px;
  outline: none;
  min-width: 0;
}

.paths-sidebar-search::placeholder {
  color: var(--color-text-muted);
}

.paths-sidebar-filter-clear {
  border: none;
  background: none;
  color: var(--color-text-muted);
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  padding: 0 2px;
}

.paths-sidebar-filter-clear:hover {
  color: var(--color-text);
}

.paths-sidebar-list {
  flex: 1;
  overflow-y: auto;
  padding: 0 8px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.paths-sidebar-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 10px;
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
}

.paths-sidebar-item:hover {
  background: var(--color-surface-hover);
}

.paths-sidebar-item.active {
  background: var(--color-primary);
  color: #fff;
}

.paths-sidebar-item.active .paths-sidebar-item-title {
  color: #fff;
}

.paths-sidebar-item.active .paths-sidebar-item-path {
  color: rgba(255, 255, 255, 0.7);
}

.paths-sidebar-item.active .paths-sidebar-item-icon {
  color: rgba(255, 255, 255, 0.9) !important;
}

.paths-sidebar-item.active .paths-sidebar-item-open {
  color: rgba(255, 255, 255, 0.8);
}

.paths-sidebar-item-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.paths-sidebar-item-text {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.paths-sidebar-item-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.paths-sidebar-item-path {
  font-size: 11px;
  color: var(--color-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.paths-sidebar-item-open {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  background: none;
  color: var(--color-text-muted);
  border-radius: 6px;
  cursor: pointer;
  opacity: 0;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.paths-sidebar-item:hover .paths-sidebar-item-open {
  opacity: 1;
}

.paths-sidebar-item-open:hover {
  background: var(--color-background-tertiary);
  color: var(--color-primary);
}

.paths-sidebar-empty {
  padding: 20px;
  text-align: center;
  font-size: 13px;
  color: var(--color-text-muted);
}

.paths-sidebar-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 16px;
  margin: 8px 12px 12px;
  border: 1px dashed var(--color-border);
  border-radius: 10px;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.paths-sidebar-add-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

/* Main content */
.paths-main {
  flex: 1;
  min-width: 0;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.paths-main-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  text-align: center;
  padding: 40px;
  color: var(--color-text-muted);
}

.paths-main-empty-icon {
  opacity: 0.2;
}

.paths-main-empty h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text-secondary);
}

.paths-main-empty p {
  font-size: 13px;
  max-width: 300px;
}

/* Detail view */
.paths-detail {
  display: flex;
  flex-direction: column;
  padding: 24px 32px;
  gap: 20px;
  animation: paths-detail-in 0.2s ease-out;
}

@keyframes paths-detail-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.paths-detail-header {
  display: flex;
  align-items: center;
  gap: 16px;
}

.paths-detail-icon {
  width: 52px;
  height: 52px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.paths-detail-header h3 {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
}

.paths-detail-subtitle {
  font-size: 13px;
  color: var(--color-text-muted);
  margin-top: 2px;
}

.paths-detail-close {
  margin-left: auto;
  border: none;
  background: none;
  color: var(--color-text-muted);
  font-size: 22px;
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: all var(--transition-fast);
}

.paths-detail-close:hover {
  background: var(--color-background-tertiary);
  color: var(--color-text);
}

/* Detail info rows */
.paths-detail-info {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  overflow: hidden;
}

.paths-detail-info-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;
  padding: 12px 16px;
}

.paths-detail-info-row + .paths-detail-info-row {
  border-top: 1px solid var(--color-border);
}

.paths-detail-info-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
  flex-shrink: 0;
  padding-top: 1px;
}

.paths-detail-info-value {
  font-size: 13px;
  color: var(--color-text);
  text-align: right;
  word-break: break-all;
}

.paths-detail-info-path {
  font-family: var(--font-mono, monospace);
  font-size: 12px;
  background: var(--color-background-tertiary);
  padding: 4px 8px;
  border-radius: 6px;
}

/* Breadcrumb */
.paths-detail-breadcrumb {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.paths-detail-breadcrumb-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.paths-detail-breadcrumb-items {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 2px;
}

.paths-detail-breadcrumb-item {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: var(--color-text-secondary);
  padding: 4px 8px;
  border-radius: 6px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
}

.paths-detail-breadcrumb-item.current {
  background: var(--color-primary);
  color: #fff;
  border-color: var(--color-primary);
  font-weight: 600;
}

.paths-detail-breadcrumb-item.current svg {
  stroke: #fff;
}

.paths-detail-breadcrumb-sep {
  opacity: 0.4;
  margin: 0 2px;
}

/* Toolbar */
.paths-detail-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding-top: 4px;
}

.paths-detail-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-surface);
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.paths-detail-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
  color: var(--color-text);
}

.paths-detail-btn-primary {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: #fff;
}

.paths-detail-btn-primary:hover {
  background: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
  color: #fff;
}

.paths-detail-btn-danger:hover {
  background: var(--color-danger);
  border-color: var(--color-danger);
  color: #fff;
}

/* Form in detail */
.paths-detail-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 16px;
}

.paths-detail-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.paths-detail-input-row {
  display: flex;
  gap: 8px;
}

.paths-detail-input-row .form-input {
  flex: 1;
}

.paths-detail-auto-title {
  font-size: 12px;
  color: var(--color-text-muted);
}

.paths-detail-auto-title strong {
  color: var(--color-text-secondary);
}

.paths-detail-actions {
  display: flex;
  gap: 8px;
  padding-top: 4px;
}

/* File browser (reusable component) */
.file-browser {
  display: flex;
  flex-direction: column;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  overflow: hidden;
  flex: 1;
  min-height: 0;
}

.file-browser-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border-bottom: 1px solid var(--color-border);
  background: var(--color-background-secondary);
}

.file-browser-nav {
  display: flex;
  gap: 4px;
}

.file-browser-nav-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  background: var(--color-surface);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.file-browser-nav-btn:hover:not(:disabled) {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.file-browser-nav-btn:disabled {
  opacity: 0.3;
  cursor: default;
}

.file-browser-location {
  display: flex;
  align-items: center;
  gap: 4px;
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

.file-browser-location-root {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  white-space: nowrap;
}

.file-browser-location-sub {
  font-size: 12px;
  color: var(--color-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.file-browser-stats {
  display: flex;
  gap: 10px;
  font-size: 11px;
  color: var(--color-text-muted);
  white-space: nowrap;
  flex-shrink: 0;
}

.file-browser-filter {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  border-bottom: 1px solid var(--color-border);
  color: var(--color-text-muted);
}

.file-browser-filter svg {
  flex-shrink: 0;
  opacity: 0.5;
}

.file-browser-filter-input {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--color-text);
  font-size: 12px;
  outline: none;
  min-width: 0;
}

.file-browser-filter-input::placeholder {
  color: var(--color-text-muted);
}

.file-browser-filter-clear {
  background: none;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  font-size: 14px;
  padding: 0 4px;
}

.file-browser-filter-clear:hover {
  color: var(--color-text);
}

.file-browser-content {
  display: flex;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.file-browser-list {
  flex: 1;
  overflow-y: auto;
  max-height: 500px;
}

.file-browser-entry {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 14px;
  cursor: pointer;
  transition: background var(--transition-fast);
  border-bottom: 1px solid var(--color-border);
  position: relative;
}

.file-browser-entry:last-child {
  border-bottom: none;
}

.file-browser-entry:hover {
  background: var(--color-surface-hover);
}

.file-browser-entry-dir:hover {
  background: color-mix(in srgb, var(--color-primary) 8%, transparent);
}

.file-browser-entry-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 22px;
}

.file-browser-entry-name {
  flex: 1;
  min-width: 0;
  font-size: 13px;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.file-browser-entry-dir .file-browser-entry-name {
  font-weight: 600;
}

.file-browser-entry-arrow {
  flex-shrink: 0;
  opacity: 0;
  color: var(--color-text-muted);
  transition: opacity var(--transition-fast);
}

.file-browser-entry:hover .file-browser-entry-arrow {
  opacity: 0.6;
}

.file-browser-entry-ext {
  font-size: 10px;
  font-weight: 700;
  color: var(--color-text-muted);
  padding: 2px 6px;
  background: var(--color-background-tertiary);
  border-radius: 4px;
  flex-shrink: 0;
}

/* Entry action buttons (show on hover) */
.file-browser-entry-actions {
  display: flex;
  gap: 2px;
  opacity: 0;
  transition: opacity var(--transition-fast);
  flex-shrink: 0;
}

.file-browser-entry:hover .file-browser-entry-actions {
  opacity: 1;
}

.file-browser-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 5px;
  background: transparent;
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.file-browser-action-btn:hover {
  background: var(--color-background-tertiary);
  color: var(--color-primary);
}

/* Rename inline input */
.file-browser-rename-input {
  flex: 1;
  min-width: 0;
  font-size: 13px;
  color: var(--color-text);
  background: var(--color-background);
  border: 1px solid var(--color-primary);
  border-radius: 4px;
  padding: 2px 6px;
  outline: none;
}

/* Loading / error / empty states */
.file-browser-loading,
.file-browser-error,
.file-browser-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 24px 16px;
  text-align: center;
  font-size: 13px;
  color: var(--color-text-muted);
}

.file-browser-error {
  color: var(--color-danger);
}

/* Preview panel */
.file-browser-preview {
  width: 320px;
  min-width: 280px;
  border-left: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  background: var(--color-background-secondary);
  overflow: hidden;
}

.file-browser-preview-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px;
  border-bottom: 1px solid var(--color-border);
}

.file-browser-preview-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.file-browser-preview-close {
  background: none;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  font-size: 18px;
  line-height: 1;
  padding: 0 4px;
}

.file-browser-preview-close:hover {
  color: var(--color-text);
}

.file-browser-preview-body {
  flex: 1;
  overflow: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 14px;
}

.file-browser-preview-img {
  max-width: 100%;
  max-height: 400px;
  border-radius: 8px;
  object-fit: contain;
}

.file-browser-preview-pdf {
  width: 100%;
  height: 100%;
  min-height: 400px;
  border: none;
  border-radius: 8px;
}

@media (max-width: 800px) {
  .paths-split {
    flex-direction: column;
  }
  .paths-sidebar {
    width: 100%;
    min-width: 100%;
    max-height: 260px;
    border-right: none;
    border-bottom: 1px solid var(--color-border);
  }
}

/* ========================================
 * PROJETOS
 * ======================================== */

.projects-split {
  flex: 1;
  display: flex;
  overflow: hidden;
  background: var(--color-background);
}

.projects-sidebar {
  width: 300px;
  min-width: 260px;
  display: flex;
  flex-direction: column;
  background: var(--color-background);
  border-right: 1px solid var(--color-border);
  overflow: hidden;
}

.projects-sidebar-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px 16px 8px;
}

.projects-sidebar-header h2 {
  font-size: 16px;
  font-weight: 700;
  margin: 0;
}

.projects-sidebar-count {
  font-size: 11px;
  color: var(--color-text-muted);
  background: var(--color-background-tertiary);
  padding: 2px 8px;
  border-radius: 10px;
}

.projects-sidebar-filter {
  padding: 0 12px 8px;
}

.projects-sidebar-filter-input {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 6px 10px;
  color: var(--color-text-muted);
}

.projects-sidebar-search {
  border: none;
  background: transparent;
  color: var(--color-text);
  font-size: 13px;
  outline: none;
  flex: 1;
  min-width: 0;
}

.projects-sidebar-search::placeholder {
  color: var(--color-text-muted);
}

.projects-sidebar-filter-clear {
  background: none;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  font-size: 14px;
  padding: 0;
}

.projects-sidebar-list {
  flex: 1;
  overflow-y: auto;
  padding: 0 8px;
}

.projects-sidebar-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 8px;
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
}

.projects-sidebar-item:hover {
  background: var(--color-surface-hover);
}

.projects-sidebar-item.active {
  background: var(--color-primary-light);
}

.projects-sidebar-item-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  flex-shrink: 0;
}

.projects-sidebar-item-text {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.projects-sidebar-item-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.projects-sidebar-item-path {
  font-size: 11px;
  color: var(--color-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.projects-sidebar-item-open {
  opacity: 0;
  background: none;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: all var(--transition-fast);
}

.projects-sidebar-item:hover .projects-sidebar-item-open {
  opacity: 1;
}

.projects-sidebar-item-open:hover {
  color: var(--color-primary);
}

.projects-sidebar-empty {
  text-align: center;
  padding: 20px;
  color: var(--color-text-muted);
  font-size: 13px;
}

.projects-sidebar-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin: 8px 12px 12px;
  padding: 10px;
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.projects-sidebar-add-btn:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background: var(--color-primary-light);
}

/* Projects Main */
.projects-main {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.projects-main-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 12px;
  color: var(--color-text-muted);
  text-align: center;
}

.projects-main-empty-icon {
  opacity: 0.2;
}

.projects-main-empty h3 {
  margin: 0;
  font-size: 18px;
  color: var(--color-text);
}

.projects-main-empty p {
  max-width: 280px;
  font-size: 13px;
  line-height: 1.5;
}

.projects-detail {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-width: 900px;
}

.projects-detail-header {
  display: flex;
  align-items: center;
  gap: 14px;
}

.projects-detail-icon {
  width: 50px;
  height: 50px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.projects-detail-subtitle {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 2px 0 0;
}

.projects-detail-path {
  font-size: 11px;
  color: var(--color-text-muted);
  margin: 2px 0 0;
  word-break: break-all;
}

.projects-detail-close {
  margin-left: auto;
  background: none;
  border: none;
  color: var(--color-text-muted);
  font-size: 24px;
  cursor: pointer;
  padding: 0 8px;
}

.projects-detail-close:hover {
  color: var(--color-text);
}

.projects-detail-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.projects-detail-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
}

.projects-detail-input-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.projects-detail-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.projects-detail-edit {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Projects toolbar */
.projects-detail-toolbar {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.projects-detail-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 7px 12px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-surface);
  color: var(--color-text-secondary);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.projects-detail-btn:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.projects-detail-btn-primary {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.projects-detail-btn-primary:hover {
  background: var(--color-primary-hover);
  color: white;
}

.projects-detail-btn-danger:hover {
  border-color: var(--color-danger);
  color: var(--color-danger);
  background: rgba(239, 68, 68, 0.08);
}

/* Color picker */
.projects-color-picker {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.projects-color-dot {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.projects-color-dot:hover {
  transform: scale(1.15);
}

.projects-color-dot.active {
  border-color: var(--color-text);
  box-shadow: 0 0 0 2px var(--color-background);
}

/* IDE dropdown */
.projects-ide-dropdown-wrap {
  position: relative;
}

.projects-ide-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 50;
  margin-top: 4px;
  min-width: 200px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  padding: 4px;
  overflow: hidden;
}

.projects-ide-dropdown-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 12px;
  border: none;
  border-radius: 6px;
  background: transparent;
  color: var(--color-text);
  font-size: 13px;
  cursor: pointer;
  transition: background var(--transition-fast);
  text-align: left;
}

.projects-ide-dropdown-item:hover {
  background: var(--color-primary-light);
}

/* Projects tabs */
.projects-tabs {
  display: flex;
  gap: 4px;
  border-bottom: 1px solid var(--color-border);
  padding-bottom: 0;
}

.projects-tab-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border: none;
  border-bottom: 2px solid transparent;
  background: transparent;
  color: var(--color-text-muted);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.projects-tab-btn:hover {
  color: var(--color-text);
}

.projects-tab-btn.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

.projects-tab-content {
  flex: 1;
  min-height: 0;
}

/* Projects notes tab */
.projects-notes {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-top: 12px;
}

.projects-notes-add {
  display: flex;
  gap: 8px;
}

.projects-notes-empty {
  text-align: center;
  padding: 20px;
  color: var(--color-text-muted);
  font-size: 13px;
}

.projects-notes-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  transition: border-color var(--transition-fast);
  color: var(--color-text-muted);
}

.projects-notes-item:hover {
  border-color: var(--color-border-light);
}

.projects-notes-item-title {
  flex: 1;
  font-size: 13px;
  color: var(--color-text);
  font-weight: 500;
}

.projects-notes-item-date {
  font-size: 11px;
  color: var(--color-text-muted);
}

/* Projects cards tab */
.projects-cards {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-top: 12px;
}

.projects-cards-empty {
  text-align: center;
  padding: 20px;
  color: var(--color-text-muted);
  font-size: 13px;
}

.projects-card-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.projects-card-row:hover {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.projects-card-row-main {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.projects-card-row-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.projects-card-row-date {
  font-size: 11px;
  color: var(--color-text-muted);
}

.projects-card-row-meta {
  display: flex;
  gap: 6px;
  flex-shrink: 0;
}

.projects-card-row-badge {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--color-background-tertiary);
  color: var(--color-text-muted);
  white-space: nowrap;
}

.projects-card-row-unlink {
  background: none;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  font-size: 16px;
  padding: 0 4px;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.projects-card-row:hover .projects-card-row-unlink {
  opacity: 1;
}

.projects-card-row-unlink:hover {
  color: var(--color-danger);
}

/* Links */
.projects-links {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.projects-links-add {
  display: flex;
  gap: 6px;
  align-items: center;
}

.projects-links-add .form-input:first-child {
  width: 160px;
  flex-shrink: 0;
}

.projects-links-empty {
  text-align: center;
  padding: 24px 16px;
  color: var(--color-text-muted);
  font-size: 13px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.projects-links-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.projects-links-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  transition: all var(--transition-fast);
}

.projects-links-item:hover {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.projects-links-item-icon {
  flex-shrink: 0;
  color: var(--color-text-muted);
  display: flex;
  align-items: center;
}

.projects-links-item-text {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.projects-links-item-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.projects-links-item-url {
  font-size: 11px;
  color: var(--color-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.projects-links-item-open,
.projects-links-item-remove {
  background: none;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  padding: 2px 4px;
  opacity: 0;
  transition: opacity var(--transition-fast);
  display: flex;
  align-items: center;
}

.projects-links-item:hover .projects-links-item-open,
.projects-links-item:hover .projects-links-item-remove {
  opacity: 1;
}

.projects-links-item-open:hover {
  color: var(--color-primary);
}

.projects-links-item-remove {
  font-size: 16px;
}

.projects-links-item-remove:hover {
  color: var(--color-danger);
}

@media (max-width: 800px) {
  .projects-split {
    flex-direction: column;
  }
  .projects-sidebar {
    width: 100%;
    min-width: 100%;
    max-height: 260px;
    border-right: none;
    border-bottom: 1px solid var(--color-border);
  }
}

/* ========================================
 * CONFIGURACOES
 * ======================================== */

.settings-layout {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  background: var(--color-background);
}

.settings-header {
  padding: 24px;
  border-bottom: 1px solid var(--color-border);
  background: var(--color-background-secondary);
}

.settings-header h2 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 4px;
}

.settings-header p {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.settings-section {
  padding: 24px;
  border-bottom: 1px solid var(--color-border);
}

.settings-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 16px;
}

.settings-section-header h3 {
  font-size: 15px;
  font-weight: 600;
}

.settings-color-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 16px;
}

.settings-color-field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.settings-color-input {
  display: flex;
  align-items: center;
  gap: 12px;
}

.settings-color-input input[type="color"] {
  width: 40px;
  height: 36px;
  border: none;
  background: transparent;
  padding: 0;
}

.settings-data {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  align-items: flex-end;
}

.settings-data-path {
  flex: 1;
  min-width: 280px;
}

.settings-data-hint {
  font-size: 12px;
  color: var(--color-text-muted);
  margin-top: 6px;
}

.settings-data-actions {
  display: flex;
  gap: 8px;
}

/* Settings - IDE Registration */
.settings-ide-form {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 16px;
  margin-bottom: 16px;
}

.settings-ide-form h4 {
  margin: 0 0 12px;
  font-size: 14px;
  font-weight: 600;
}

.settings-ide-form-fields {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.settings-ide-form-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.settings-ide-form-icon {
  width: 32px;
  height: 32px;
  border-radius: 6px;
  object-fit: contain;
}

.settings-ide-form-hint {
  font-size: 11px;
  color: var(--color-text-muted);
}

.settings-ide-form-hint code {
  background: var(--color-background-tertiary);
  padding: 1px 5px;
  border-radius: 3px;
  font-size: 11px;
}

.settings-ide-form-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.settings-ide-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.settings-ide-empty {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 20px;
  color: var(--color-text-muted);
  font-size: 13px;
}

.settings-ide-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  transition: border-color var(--transition-fast);
}

.settings-ide-item:hover {
  border-color: var(--color-border-light);
}

.settings-ide-item-icon {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  object-fit: contain;
  flex-shrink: 0;
}

.settings-ide-item-icon-placeholder {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  background: var(--color-background-tertiary);
  color: var(--color-text-muted);
  flex-shrink: 0;
}

.settings-ide-item-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.settings-ide-item-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.settings-ide-item-path {
  font-size: 11px;
  color: var(--color-text-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.settings-ide-item-args {
  font-size: 10px;
  color: var(--color-text-muted);
  opacity: 0.7;
}

.settings-ide-item-actions {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}

.settings-ide-add-btn {
  min-height: 36px;
  padding-inline: 14px;
}

.btn-sm {
  padding: 4px 8px;
  font-size: 12px;
  min-height: 28px;
}

.btn-danger {
  background: transparent;
  color: var(--color-danger);
  border: 1px solid var(--color-danger);
}

.btn-danger:hover {
  background: var(--color-danger);
  color: white;
}

.btn-danger.btn-sm {
  padding: 6px 12px;
  font-size: 12px;
  min-height: 28px;
}

.settings-app-info {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.settings-app-info-col {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Settings - Backup */
.settings-backup-content {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.settings-data-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
}

.settings-data-card {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 14px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
}

.settings-data-card h4 {
  margin: 0;
  font-size: 13px;
  font-weight: 700;
  color: var(--color-text);
}

.settings-backup-config {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-backup-config label {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.settings-backup-config input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.settings-backup-interval {
  margin-left: 26px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.settings-backup-interval .form-label {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
}

.settings-help-text {
  font-size: 11px;
  color: var(--color-text-muted);
  margin: 0;
}

.settings-help-text code {
  background: var(--color-background-tertiary);
  padding: 1px 5px;
  border-radius: 3px;
  font-size: 10px;
}

.settings-backup-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.settings-backup-import-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding-top: 20px;
  border-top: 1px solid var(--color-border);
}

.settings-backup-import-section h4 {
  font-size: 13px;
  font-weight: 600;
  margin: 0;
}

@media (max-width: 1180px) {
  .settings-data-grid {
    grid-template-columns: 1fr;
  }
}

.settings-backups-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-backups-list h4 {
  font-size: 13px;
  font-weight: 600;
  margin: 0;
}

.settings-backups-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.settings-backup-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  transition: border-color var(--transition-fast);
}

.settings-backup-item:hover {
  border-color: var(--color-border-light);
}

.settings-backup-item-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.settings-backup-item-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.settings-backup-item-meta {
  font-size: 11px;
  color: var(--color-text-muted);
}

.btn-xs {
  padding: 4px 10px;
  font-size: 11px;
  min-height: 24px;
}

.settings-reset {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-suggestions {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.settings-suggestion-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-text-muted);
}

.settings-suggestion-item svg {
  color: var(--color-primary);
  flex-shrink: 0;
}

.settings-shortcuts {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-shortcut-item {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 12px 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  transition: all var(--transition-fast);
}

.settings-shortcut-item:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.settings-shortcut-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
}

.settings-shortcut-keys {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

.settings-shortcut-keys kbd {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  height: 28px;
  padding: 0 8px;
  font-size: 12px;
  font-weight: 600;
  font-family: var(--font-sans);
  color: var(--color-text);
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.settings-shortcut-keys span {
  color: var(--color-text-muted);
  font-size: 14px;
  font-weight: 500;
}

.settings-shortcut-description {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.settings-shortcut-action {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
}

.settings-shortcut-hint {
  font-size: 12px;
  color: var(--color-text-muted);
}

.keyboard-shortcut-capture-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(4px);
}

.keyboard-shortcut-capture {
  background: var(--color-surface);
  border: 2px solid var(--color-primary);
  border-radius: 12px;
  padding: 32px;
  min-width: 400px;
  box-shadow: var(--shadow-modal);
}

.keyboard-shortcut-capture-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.keyboard-shortcut-capture-label {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.keyboard-shortcut-capture-keys {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-primary);
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px 24px;
  background: var(--color-background-secondary);
  border-radius: 8px;
  border: 2px dashed var(--color-border);
  width: 100%;
  text-align: center;
}

.keyboard-shortcut-capture-timer {
  width: 100%;
  height: 4px;
  background: var(--color-background-secondary);
  border-radius: 2px;
  overflow: hidden;
}

.keyboard-shortcut-capture-timer-bar {
  height: 100%;
  background: var(--color-primary);
  transition: width 0.05s linear;
  border-radius: 2px;
}

.keyboard-shortcut-capture-hint {
  font-size: 12px;
  color: var(--color-text-muted);
  text-align: center;
}

/* Shortcut Search Modal */
.shortcut-search-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(4px);
  animation: fadeIn var(--transition-normal);
}

.shortcut-search-modal {
  width: 90%;
  max-width: 600px;
  max-height: 80vh;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  box-shadow: var(--shadow-modal);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: scaleIn var(--transition-normal);
}

.shortcut-search-modal-header {
  padding: 20px;
  border-bottom: 1px solid var(--color-border);
}

.shortcut-search-modal-input-wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
}

.shortcut-search-modal-input-wrapper svg {
  flex-shrink: 0;
  color: var(--color-text-muted);
}

.shortcut-search-modal-input {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--color-text);
  font-size: 16px;
  outline: none;
  padding: 0;
}

.shortcut-search-modal-input::placeholder {
  color: var(--color-text-muted);
}

.shortcut-search-modal-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 6px;
  color: var(--color-text-muted);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.shortcut-search-modal-clear:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.shortcut-search-modal-results {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.shortcut-search-modal-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: var(--color-text-muted);
  gap: 16px;
}

.shortcut-search-modal-empty p {
  font-size: 14px;
  margin: 0;
}

.shortcut-search-modal-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.shortcut-search-modal-item:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.shortcut-search-modal-item.is-active {
  background: var(--color-primary-light);
  border-color: var(--color-primary);
}

.shortcut-search-modal-item-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  flex-shrink: 0;
  color: var(--color-text-muted);
}

.shortcut-search-modal-emoji {
  font-size: 20px;
}

.shortcut-search-modal-item-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.shortcut-search-modal-item-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.shortcut-search-modal-item-url {
  font-size: 12px;
  color: var(--color-text-muted);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.shortcut-search-modal-item-action {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  flex-shrink: 0;
  color: var(--color-text-muted);
}

.shortcut-search-modal-item.is-active .shortcut-search-modal-item-action {
  color: var(--color-primary);
}

.shortcut-search-modal-footer {
  padding: 12px 20px;
  border-top: 1px solid var(--color-border);
  background: var(--color-background-secondary);
}

.shortcut-search-modal-hint {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--color-text-muted);
  justify-content: center;
}

.shortcut-search-modal-hint kbd {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  font-size: 11px;
  font-weight: 600;
  font-family: var(--font-sans);
  color: var(--color-text);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.shortcut-search-modal-hint span {
  margin: 0 4px;
}

.settings-reset-warning {
  font-size: 13px;
  color: var(--color-text-muted);
  margin: 0;
  padding: 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
}

.settings-reset-trigger {
  align-self: flex-start;
  border-color: color-mix(in srgb, var(--color-danger) 35%, var(--color-border));
  color: var(--color-danger);
}

.settings-reset-trigger:hover:not(:disabled) {
  border-color: color-mix(in srgb, var(--color-danger) 55%, var(--color-border-light));
  background: color-mix(in srgb, var(--color-danger) 10%, var(--color-surface-hover));
  color: var(--color-danger);
}

.settings-reset-confirm {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  background: var(--color-surface);
  border: 2px solid var(--color-danger);
  border-radius: 10px;
}

.settings-reset-confirm-text {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-danger);
  margin: 0;
}

.settings-reset-confirm-actions {
  display: flex;
  gap: 8px;
}

/* ========================================
 * HISTORY VIEW
 * ======================================== */

.history-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
  padding: 20px;
  gap: 14px;
}

.history-header {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.history-header h2 {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.history-header p {
  font-size: 13px;
  color: var(--color-text-muted);
}

.history-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.history-filter-btn {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text-secondary);
  font-size: 12px;
  font-weight: 600;
  transition: all var(--transition-fast);
}

.history-filter-btn:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.history-filter-btn.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

.history-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
  min-height: 0;
}

.history-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
}

.history-item-type {
  font-size: 11px;
  font-weight: 700;
  color: var(--color-primary);
  background: var(--color-primary-light);
  border-radius: 999px;
  padding: 3px 8px;
  flex-shrink: 0;
}

.history-item-main {
  flex: 1;
  min-width: 0;
}

.history-item-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.history-item-detail {
  font-size: 11px;
  color: var(--color-text-muted);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.history-item-time {
  font-size: 11px;
  color: var(--color-text-muted);
  white-space: nowrap;
  flex-shrink: 0;
}

.history-empty {
  padding: 18px;
  text-align: center;
  border: 1px dashed var(--color-border);
  border-radius: 10px;
  color: var(--color-text-muted);
  font-size: 13px;
}

/* ========================================
 * THEME SELECTOR CARDS
 * ======================================== */

.theme-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 16px;
}

.theme-carousel-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  gap: 12px;
}

.theme-carousel {
  position: relative;
  flex: 1;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: var(--color-border) transparent;
  touch-action: pan-x;
  scroll-snap-type: x proximity;
}

.theme-carousel-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.theme-carousel-arrow:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
  color: var(--color-primary);
}

.theme-carousel-arrow:active {
  transform: scale(0.95);
}

.theme-carousel-arrow:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.theme-carousel::-webkit-scrollbar {
  height: 8px;
}

.theme-carousel::-webkit-scrollbar-track {
  background: transparent;
}

.theme-carousel::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
  transition: background var(--transition-fast);
}

.theme-carousel::-webkit-scrollbar-thumb:hover {
  background: var(--color-border-light);
}


.theme-carousel-track {
  display: inline-flex;
  gap: 16px;
  padding: 8px 0;
  min-width: min-content;
}

.theme-card {
  position: relative;
  display: flex;
  flex-direction: column;
  padding: 12px;
  border: 2px solid var(--color-border);
  border-radius: 12px;
  background: var(--color-surface);
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
  width: 180px;
  scroll-snap-align: start;
  user-select: none;
  -webkit-user-select: none;
}

.theme-card:hover {
  border-color: var(--color-border-light);
  transform: translateY(-2px);
}

.theme-card-selected {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

.theme-card-preview {
  display: flex;
  height: 80px;
  border-radius: 8px;
  overflow: hidden;
  background: var(--preview-bg);
  border: 1px solid var(--color-border);
}

.theme-preview-sidebar {
  width: 40px;
  background: var(--preview-surface);
  border-right: 1px solid rgba(128, 128, 128, 0.2);
}

.theme-preview-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 8px;
  gap: 6px;
}

.theme-preview-header {
  height: 12px;
  border-radius: 4px;
  background: var(--preview-primary);
  opacity: 0.8;
}

.theme-preview-cards {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.theme-preview-card {
  height: 16px;
  border-radius: 4px;
  background: var(--preview-surface);
  border: 1px solid rgba(128, 128, 128, 0.2);
}

.theme-card-label {
  margin-top: 10px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  text-align: center;
}

.theme-card-check {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--color-primary);
  color: white;
}

/* ========================================
 * INSTALLER
 * ======================================== */

.installer-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 40px;
  background: var(--color-background);
}

.installer-content {
  width: 100%;
  max-width: 600px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 40px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.installer-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.installer-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100px;
  height: 100px;
  margin-bottom: 24px;
  border-radius: 50%;
  background: var(--color-primary-light);
  color: var(--color-primary);
}

.installer-step h1 {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 12px;
  color: var(--color-text);
}

.installer-step h2 {
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 8px;
  color: var(--color-text);
}

.installer-step p {
  font-size: 15px;
  color: var(--color-text-secondary);
  margin-bottom: 8px;
}

.installer-subtitle {
  font-size: 13px !important;
  color: var(--color-text-muted) !important;
  max-width: 400px;
  margin-bottom: 32px !important;
}

.installer-btn {
  min-width: 160px;
  padding: 14px 32px;
  font-size: 16px;
  margin-top: 16px;
}

.installer-folder-options {
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  margin: 24px 0;
}

.installer-folder-option {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 20px;
  background: var(--color-background);
  border: 2px solid var(--color-border);
  border-radius: 12px;
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: left;
}

.installer-folder-option:hover {
  border-color: var(--color-border-light);
}

.installer-folder-option.selected {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.installer-folder-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
}

.installer-folder-option.selected .installer-folder-icon {
  color: var(--color-primary);
}

.installer-folder-label {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
}

.installer-folder-hint {
  font-size: 12px;
  color: var(--color-text-muted);
  word-break: break-all;
}

.installer-nav {
  display: flex;
  gap: 12px;
  margin-top: 32px;
}

.installer-nav .btn {
  min-width: 120px;
}

.installer-theme-grid {
  margin: 24px 0;
  width: 100%;
}

.installer-summary {
  width: 100%;
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  margin: 24px 0;
}

.installer-summary-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-border);
}

.installer-summary-item:last-child {
  border-bottom: none;
}

.installer-summary-label {
  font-size: 13px;
  color: var(--color-text-muted);
}

.installer-summary-value {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.installer-error {
  width: 100%;
  padding: 12px 16px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid var(--color-danger);
  border-radius: 8px;
  color: var(--color-danger);
  font-size: 13px;
  margin-bottom: 16px;
}

.installer-progress {
  display: flex;
  gap: 8px;
  margin-top: 32px;
}

.installer-progress-step {
  width: 40px;
  height: 4px;
  border-radius: 2px;
  background: var(--color-border);
  transition: background var(--transition-fast);
}

.installer-progress-step.active {
  background: var(--color-primary);
}

.installer-progress-step.completed {
  background: var(--color-primary);
  opacity: 0.5;
}

/* ========================================
 * CALENDARIO
 * ======================================== */

.calendar-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
  padding: 16px;
  gap: 16px;
}

.calendar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.calendar-title h2 {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
  letter-spacing: 0.2px;
}

.calendar-nav {
  display: flex;
  align-items: center;
  gap: 10px;
}

.calendar-grid {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
}

.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 8px;
  padding: 12px;
  background: var(--color-background-tertiary);
  border-bottom: 1px solid var(--color-border);
}

.calendar-weekday {
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  color: var(--color-text-muted);
  text-align: center;
}

.calendar-days {
  flex: 1;
  min-height: 0;
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 5px;
  padding: 10px;
  overflow: auto;
}

.calendar-day {
  position: relative;
  display: flex;
  flex-direction: column;
  padding: 6px 7px;
  min-height: 90px;
  border-radius: 8px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  cursor: pointer;
  transition: transform var(--transition-fast), background var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast);
}

.calendar-day:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.calendar-day.empty {
  border: 1px dashed transparent;
  background: transparent;
  cursor: default;
  pointer-events: none;
  min-height: 0;
}

.calendar-day-number {
  font-size: 11px;
  font-weight: 700;
  color: var(--color-text-secondary);
  margin-bottom: 4px;
}

.calendar-day.today {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px var(--color-primary-light);
}

.calendar-day.today .calendar-day-number {
  color: var(--color-primary);
}

.calendar-day.selected {
  background: var(--color-primary-light);
  border-color: transparent;
}

.calendar-day.selected .calendar-day-number {
  color: var(--color-primary);
}

.calendar-day.has-items .calendar-day-number {
  color: var(--color-text);
}

/* Calendar day inline previews */
.calendar-day-items {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-top: auto;
  min-width: 0;
}

.calendar-day-entry {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 1px 4px;
  border-radius: 4px;
  min-width: 0;
}

.calendar-day-entry-event {
  background: rgba(255, 255, 255, 0.06);
}

.calendar-day-entry-card {
  background: var(--color-primary-light);
}

.calendar-day-entry-dot {
  width: 5px;
  height: 5px;
  border-radius: 999px;
  flex-shrink: 0;
}

.calendar-day-entry-card .calendar-day-entry-dot {
  background: var(--color-primary);
}

.calendar-day-entry-label {
  font-size: 10px;
  font-weight: 500;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.5;
}

.calendar-day-overflow {
  font-size: 10px;
  font-weight: 600;
  color: var(--color-text-muted);
  padding-left: 4px;
}

.calendar-detail {
  flex-shrink: 0;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
  overflow: hidden;
}

.calendar-detail-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--color-border);
}

.calendar-detail-header h3 {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-text);
}

.calendar-detail-items {
  padding: 12px 16px 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: 220px;
  overflow: auto;
}

.calendar-event-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
}

.calendar-event-color {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  flex-shrink: 0;
}

.calendar-event-title {
  flex: 1;
  font-size: 13px;
  color: var(--color-text);
  line-height: 1.35;
  word-break: break-word;
}

.calendar-event-badge {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
  background: var(--color-background-tertiary);
  padding: 2px 8px;
  border-radius: 999px;
}

.calendar-event-delete {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 10px;
  color: var(--color-text-muted);
  transition: all var(--transition-fast);
}

.calendar-event-delete:hover {
  background: var(--color-background-tertiary);
  color: var(--color-danger);
}

.calendar-detail-empty {
  font-size: 13px;
  color: var(--color-text-muted);
  padding: 6px 2px;
}

/* ========================================
 * HOJE (DASHBOARD)
 * ======================================== */

.today-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: auto;
  padding: 24px;
  gap: 20px;
}

.today-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 16px;
}

.today-date {
  display: flex;
  flex-direction: column;
}

.today-date-full-line {
  font-size: 20px;
  font-weight: 500;
  letter-spacing: 0.2px;
  color: var(--color-text);
  line-height: 1.5;
  margin: 0;
}

.today-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Stats row */
.today-stats {
  display: flex;
  gap: 12px;
}

.today-stat {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 14px 12px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
}

.today-stat-total {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.today-stat-value {
  font-size: 22px;
  font-weight: 800;
  color: var(--color-text);
  line-height: 1;
}

.today-stat-total .today-stat-value {
  color: var(--color-primary);
}

.today-stat-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.4px;
}

/* Content grid */
.today-content {
  display: grid;
  grid-template-columns: 1.4fr 0.6fr;
  gap: 16px;
  align-items: start;
}

.today-main-col,
.today-side-col {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.today-section {
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
  overflow: visible;
}

.today-section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--color-border);
  color: var(--color-text-secondary);
}

.today-section-title h2 {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: inherit;
  padding: 0;
  border: none;
}

.today-section-count {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 22px;
  height: 22px;
  padding: 0 6px;
  font-size: 11px;
  font-weight: 700;
  background: var(--color-background-tertiary);
  color: var(--color-text-secondary);
  border-radius: 999px;
}

.today-empty {
  padding: 18px 16px;
  color: var(--color-text-muted);
  font-size: 13px;
}

.today-items {
  padding: 10px 12px 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.today-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid var(--color-border);
  border-radius: 10px;
  background: var(--color-surface);
  transition: background var(--transition-fast);
}

.today-item:hover {
  background: var(--color-surface-hover);
}

.today-item-color {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  flex-shrink: 0;
}

.today-item-content {
  flex: 1;
  min-width: 0;
}

.today-item-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  line-height: 1.25;
  word-break: break-word;
}

.today-item-desc {
  margin-top: 3px;
  font-size: 12px;
  color: var(--color-text-muted);
  line-height: 1.35;
}

.today-item-badge {
  font-size: 10px;
  font-weight: 600;
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
  background: var(--color-background-tertiary);
  padding: 2px 8px;
  border-radius: 999px;
  flex-shrink: 0;
}

/* Macros */
.today-macros {
  padding: 10px 12px 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.today-macro-btn {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 13px;
  font-weight: 600;
  transition: all var(--transition-fast);
}

.today-macro-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

/* Summary */
.today-summary {
  padding: 10px 14px 14px;
  display: flex;
  flex-direction: column;
  gap: 0;
}

.today-summary-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 0;
  font-size: 13px;
  color: var(--color-text-secondary);
  border-bottom: 1px solid var(--color-border);
}

.today-summary-row:last-child {
  border-bottom: none;
}

.today-summary-row span:last-child {
  font-weight: 700;
  color: var(--color-text);
}

/* Dashboard - Section link */
.today-section-link {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-primary);
  background: none;
  border: none;
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.today-section-link:hover {
  opacity: 0.7;
}

/* Dashboard - Today item done state */
.today-item.is-done {
  opacity: 0.6;
}

/* Dashboard - Weekly Mini Grid */
.today-week-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
  padding: 10px 12px;
}

.today-week-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 4px;
  border-radius: 8px;
  transition: background var(--transition-fast);
}

.today-week-day.is-today {
  background: var(--color-primary-light);
  border: 1px solid var(--color-primary);
}

.today-week-day-name {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  color: var(--color-text-muted);
}

.today-week-day.is-today .today-week-day-name {
  color: var(--color-primary);
}

.today-week-day-count {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-text);
}

.today-week-day-dots {
  display: flex;
  gap: 3px;
}

.today-week-dot {
  width: 5px;
  height: 5px;
  border-radius: 50%;
}

/* Dashboard - Goals Mini */
.today-goals-mini {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px 12px 0;
}

.today-goal-mini {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.today-goal-mini-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.today-goal-mini-name {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text);
}

.today-goal-mini-pct {
  font-size: 11px;
  font-weight: 700;
  color: var(--color-text-secondary);
}

.today-goal-mini-bar {
  height: 5px;
  border-radius: 3px;
  background: var(--color-border);
  overflow: hidden;
}

.today-goal-mini-bar > div {
  height: 100%;
  border-radius: 3px;
  transition: width var(--transition-slow);
}

@media (max-width: 980px) {
  .today-content {
    grid-template-columns: 1fr;
  }
  .today-stats {
    flex-wrap: wrap;
  }
}

/* ========================================
 * CLIPBOARD
 * ======================================== */

.clipboard-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
  padding: 16px;
  gap: 14px;
}

.clipboard-header h2 {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.clipboard-header p {
  margin-top: 4px;
  font-size: 13px;
  color: var(--color-text-muted);
}

.clipboard-categories {
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
  padding: 16px;
}

.clipboard-categories-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.clipboard-categories-header h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.clipboard-category-form {
  display: flex;
  gap: 8px;
  align-items: center;
}

.clipboard-categories-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.clipboard-category-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.clipboard-category-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  color: var(--color-text);
  font-size: 13px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.clipboard-category-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.clipboard-category-btn.active {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.clipboard-category-count {
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 10px;
}

.clipboard-category-btn.active .clipboard-category-count {
  background: rgba(255, 255, 255, 0.2);
}

.clipboard-category-actions {
  display: flex;
  gap: 2px;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.clipboard-category-item:hover .clipboard-category-actions {
  opacity: 1;
}

.clipboard-category-action {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  padding: 0;
  background: transparent;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
  border-radius: 4px;
  transition: all var(--transition-fast);
}

.clipboard-category-action:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.clipboard-category-input {
  flex: 1;
  padding: 6px 10px;
  font-size: 13px;
  border-radius: 8px;
  min-width: 150px;
}

.clipboard-add {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.clipboard-add-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.clipboard-textarea {
  flex: 1;
  min-height: 88px;
  resize: vertical;
  padding: 12px 16px;
  border-radius: 12px;
}

.clipboard-list {
  flex: 1;
  min-height: 0;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.clipboard-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 40px 20px;
  color: var(--color-text-muted);
  font-size: 13px;
  text-align: center;
  border: 1px dashed var(--color-border);
  border-radius: 14px;
}

.clipboard-empty svg {
  opacity: 0.3;
}

.clipboard-item {
  border: 1px solid var(--color-border);
  border-radius: 14px;
  background: var(--color-background-secondary);
  overflow: hidden;
}

.clipboard-item.pinned {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px var(--color-primary-light);
}

.clipboard-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  border-bottom: 1px solid var(--color-border);
}

.clipboard-title-input {
  width: 100%;
  max-width: 420px;
  padding: 8px 12px;
  border-radius: 10px;
}

.clipboard-category-select {
  padding: 4px 8px;
  font-size: 12px;
  border-radius: 6px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.clipboard-category-select:hover {
  border-color: var(--color-border-light);
}

.clipboard-item-actions {
  display: flex;
  align-items: center;
  gap: 6px;
  gap: 6px;
}

.clipboard-btn {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  border: 1px solid transparent;
  transition: all var(--transition-fast);
}

.clipboard-btn:hover {
  background: var(--color-surface);
  color: var(--color-text);
  border-color: var(--color-border);
}

.clipboard-btn.active {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

.clipboard-btn-delete:hover {
  background: rgba(239, 68, 68, 0.12);
  color: var(--color-danger);
  border-color: rgba(239, 68, 68, 0.35);
}

.clipboard-item-content {
  padding: 12px 14px 14px;
  font-size: 13px;
  font-family: 'Fira Code', 'Consolas', monospace;
  color: var(--color-text-secondary);
  white-space: pre-wrap;
  word-break: break-word;
  line-height: 1.5;
  cursor: pointer;
  transition: background var(--transition-fast);
  max-height: 200px;
  overflow: auto;
}

.clipboard-item-content:hover {
  background: var(--color-surface-hover);
}

.clipboard-item-title {
  display: inline-flex;
  align-items: center;
  font-size: 13px;
  font-weight: 700;
  color: var(--color-text);
  cursor: pointer;
}

/* ========================================
 * NOTAS
 * ======================================== */

.notes-layout {
  display: flex;
  flex: 1;
  overflow: hidden;
  min-height: 0;
}

/* Single sidebar with folders + notes list - Estilo Notion */
.notes-sidebar {
  width: 240px;
  min-width: 240px;
  background: var(--color-backlog-bg);
  border-right: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.notes-sidebar-header {
  padding: 12px 16px;
  background: var(--color-backlog-header);
  border-bottom: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--color-text-secondary);
}

.notes-sidebar-header h3 {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.notes-folder-add {
  padding: 10px 12px;
  border-bottom: 1px solid var(--color-border);
  display: flex;
  gap: 6px;
}

.notes-folder-add .form-input {
  font-size: 12px;
  padding: 5px 8px;
}

.notes-folder-add .btn {
  padding: 4px 10px;
  font-size: 13px;
}

.notes-folder-list {
  overflow: auto;
  padding: 6px 8px;
  display: flex;
  flex-direction: column;
  gap: 2px;
  border-bottom: 1px solid var(--color-border);
  max-height: 180px;
}

.notes-folder-row {
  display: flex;
  align-items: stretch;
  gap: 4px;
}

.notes-folder-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  padding: 5px 10px;
  border: 1px solid transparent;
  background: transparent;
  border-radius: 6px;
  color: var(--color-text);
  font-size: 12px;
  transition: all var(--transition-fast);
}

.notes-folder-row .notes-folder-item {
  flex: 1;
  min-width: 0;
}

.notes-folder-item-label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: var(--color-text-secondary);
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.notes-folder-item-label svg {
  width: 12px;
  height: 12px;
  flex-shrink: 0;
}

.notes-folder-item:hover {
  background: var(--color-surface-hover);
}

.notes-folder-item.active {
  background: var(--color-primary-light);
  color: var(--color-primary);
}

.notes-folder-item.active .notes-folder-item-label {
  color: var(--color-primary);
}

.notes-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 18px;
  height: 18px;
  padding: 0 4px;
  font-size: 10px;
  font-weight: 700;
  background: var(--color-background-tertiary);
  color: var(--color-text-secondary);
  border-radius: 999px;
}

.notes-folder-delete {
  width: 26px;
  min-width: 26px;
  border-radius: 6px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text-muted);
  transition: all var(--transition-fast);
  opacity: 0;
  pointer-events: none;
  font-size: 14px;
}

.notes-folder-row:hover .notes-folder-delete {
  opacity: 1;
  pointer-events: auto;
}

.notes-folder-delete:hover {
  background: rgba(239, 68, 68, 0.12);
  color: var(--color-danger);
  border-color: rgba(239, 68, 68, 0.35);
}

/* Notes list (inside the same sidebar now) */
.notes-list {
  width: 280px;
  min-width: 280px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-height: 0;
  background: var(--color-background-secondary);
  border-right: 1px solid var(--color-border);
}

.notes-list-header {
  padding: 12px 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  border-bottom: 1px solid var(--color-border);
  background: var(--color-backlog-header);
}

.notes-list-header h3 {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.notes-list-add {
  display: flex;
  gap: 6px;
  flex: 1;
  min-width: 0;
}

.notes-list-add .form-input {
  font-size: 12px;
  padding: 5px 8px;
}

.notes-list-add .btn {
  padding: 4px 10px;
  font-size: 13px;
}

.notes-list-items {
  flex: 1;
  overflow: auto;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.notes-list-item {
  display: flex;
  align-items: flex-start;
  padding: 8px 12px;
  border-radius: 4px;
  border: none;
  background: transparent;
  color: var(--color-text);
  transition: all var(--transition-fast);
  text-align: left;
  width: 100%;
  min-height: 48px;
}

.notes-list-item:hover {
  background: var(--color-surface-hover);
}

.notes-list-item.active {
  background: var(--color-primary-light);
}

.notes-item-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
  flex: 1;
}

.notes-item-title {
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.notes-list-item.active .notes-item-title {
  color: var(--color-primary);
}

.notes-item-date {
  font-size: 11px;
  color: var(--color-text-muted);
  line-height: 1.3;
}

.notes-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 24px 12px;
  text-align: center;
  color: var(--color-text-muted);
  font-size: 12px;
}

.notes-editor {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding: 32px 48px;
  gap: 16px;
  max-width: 900px;
  margin: 0 auto;
  width: 100%;
}

.notes-editor-header {
  display: flex;
  align-items: center;
  gap: 10px;
}

.notes-title-input {
  flex: 1;
  padding: 0;
  border: none;
  border-radius: 0;
  font-size: 40px;
  font-weight: 700;
  background: transparent;
  color: var(--color-text);
  outline: none;
}

.notes-title-input::placeholder {
  color: var(--color-text-muted);
  opacity: 0.5;
}

.notes-title-display {
  flex: 1;
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 0;
}

.notes-add-btn {
  padding: 4px 12px;
  font-size: 15px;
  flex-shrink: 0;
}

.notes-editor-delete-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 34px;
  height: 34px;
  border-radius: 8px;
  color: var(--color-text-muted);
  border: 1px solid transparent;
  transition: all var(--transition-fast);
}

.notes-editor-delete-btn:hover {
  background: rgba(239, 68, 68, 0.12);
  color: var(--color-danger);
  border-color: rgba(239, 68, 68, 0.35);
}

.notes-editor-content {
  flex: 1;
  min-height: 0;
  overflow: auto;
}

/* Editor em Notas deve ocupar a area toda (sem limite de 300px) */
.notes-editor .editor-container {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow: visible;
}

.notes-editor .editor-container:focus-within {
  border-color: var(--color-primary);
  box-shadow: none;
}

.notes-editor .tiptap-editor {
  flex: 1;
  min-height: 0;
  max-height: none;
  padding: 24px 32px;
  border: none;
  border-radius: 0;
  background: transparent;
}

.notes-editor .tiptap-editor .ProseMirror {
  min-height: 100%;
  font-size: 16px;
  line-height: 1.6;
  color: var(--color-text);
  outline: none;
}

.notes-editor .tiptap-editor .ProseMirror:focus {
  outline: none;
}

.notes-editor .tiptap-editor .ProseMirror p {
  margin: 0.5em 0;
}

.notes-editor .tiptap-editor .ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--color-text-muted);
  pointer-events: none;
  height: 0;
}

/* Estilos "Markdown" mais completos enquanto escreve */
.tiptap-editor .ProseMirror a {
  color: var(--color-primary);
  text-decoration: underline;
  text-underline-offset: 2px;
}

.tiptap-editor .ProseMirror a:hover {
  text-decoration-thickness: 2px;
}

.notes-editor-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  color: var(--color-text-muted);
  font-size: 13px;
}

.notes-rename-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.notes-rename-modal {
  width: min(460px, calc(100vw - 32px));
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 16px;
  box-shadow: var(--shadow-modal);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.notes-rename-modal h4 {
  font-size: 14px;
  color: var(--color-text);
}

.notes-rename-input {
  width: 100%;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-background-secondary);
  color: var(--color-text);
  font-size: 14px;
  padding: 10px 12px;
  outline: none;
}

.notes-rename-input:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.notes-rename-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

/* ========================================
 * ARQUIVOS
 * ======================================== */

.files-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
  padding: 16px;
  gap: 14px;
}

.files-header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 12px;
}

.files-header-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.files-header h2 {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.files-header p {
  margin-top: 4px;
  font-size: 13px;
  color: var(--color-text-muted);
}

.files-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}

.files-search {
  flex: 1;
  min-width: 220px;
}

.files-stats {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

.files-stat-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text-secondary);
  font-size: 12px;
  font-weight: 700;
}

.files-filters {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.files-filter-btn {
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text-secondary);
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: all var(--transition-fast);
}

.files-filter-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
  color: var(--color-text);
}

.files-filter-btn.active {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

.files-content {
  flex: 1;
  min-height: 0;
  overflow: auto;
  position: relative;
}

.files-empty {
  padding: 18px 0;
  display: flex;
  justify-content: center;
}

.files-empty-card {
  width: min(560px, 100%);
  padding: 18px 16px;
  border-radius: 16px;
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
}

.files-empty-title {
  font-size: 14px;
  font-weight: 800;
  color: var(--color-text);
}

.files-empty-subtitle {
  margin-top: 6px;
  font-size: 13px;
  color: var(--color-text-muted);
}

.files-empty-actions {
  margin-top: 14px;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.files-toast {
  position: sticky;
  top: 0;
  z-index: 2;
  margin-bottom: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  font-weight: 700;
}

.files-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
}

.files-image-card {
  border: 1px solid var(--color-border);
  border-radius: 14px;
  background: var(--color-surface);
  overflow: hidden;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.files-image-preview {
  height: 120px;
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
}

.files-image-name {
  font-size: 13px;
  font-weight: 650;
  color: var(--color-text);
  word-break: break-word;
}

.files-image-actions {
  display: flex;
  gap: 8px;
}

.files-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.files-list-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
}

.files-list-icon {
  width: 34px;
  height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
}

.files-list-icon svg {
  width: 18px;
  height: 18px;
}

.files-list-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.files-list-name {
  font-size: 13px;
  font-weight: 650;
  color: var(--color-text);
  word-break: break-word;
}

.files-list-meta {
  font-size: 12px;
  color: var(--color-text-muted);
}

.files-list-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.files-drop-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 18px;
}

.files-drop-overlay.is-dragging .files-drop-modal {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-glow);
  transform: scale(1.02);
}

.files-drop-modal {
  width: min(560px, 100%);
  padding: 20px 18px;
  border-radius: 18px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  box-shadow: var(--shadow-modal);
  text-align: center;
  transition: all var(--transition-fast);
}

.files-drop-icon {
  width: 56px;
  height: 56px;
  border-radius: 16px;
  margin: 0 auto 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  color: var(--color-text-muted);
}

.files-drop-icon svg {
  width: 24px;
  height: 24px;
}

.files-drop-title {
  font-size: 16px;
  font-weight: 800;
  color: var(--color-text);
}

.files-drop-subtitle {
  margin-top: 6px;
  font-size: 13px;
  color: var(--color-text-muted);
}

.files-drop-actions {
  margin-top: 16px;
  display: flex;
  justify-content: center;
}

/* ========================================
 * APPS
 * ======================================== */

.apps-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
  padding: 20px;
  gap: 16px;
}

.apps-header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 12px;
}

.apps-header h2 {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.apps-header p {
  margin-top: 4px;
  font-size: 13px;
  color: var(--color-text-muted);
}

.apps-header-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.apps-selection-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-primary);
  padding: 4px 10px;
  background: var(--color-primary-light);
  border-radius: 999px;
}

.apps-content {
  flex: 1;
  min-height: 0;
  overflow: auto;
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 16px;
  align-items: start;
}

.apps-section {
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
  overflow: hidden;
}

.apps-section h3 {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: var(--color-text-secondary);
}

.apps-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--color-border);
}

.apps-section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--color-text-secondary);
}

.apps-section-count {
  font-size: 11px;
  font-weight: 700;
  color: var(--color-text-muted);
  background: var(--color-surface);
  padding: 2px 8px;
  border-radius: 999px;
}

.apps-section-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.apps-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 40px 20px;
  color: var(--color-text-muted);
  font-size: 13px;
  text-align: center;
}

.apps-empty svg {
  opacity: 0.3;
}

.apps-empty-small {
  padding: 20px 16px;
}

.apps-grid {
  padding: 14px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 10px;
}

.apps-card {
  position: relative;
  border: 1px solid var(--color-border);
  border-radius: 12px;
  background: var(--color-surface);
  padding: 14px 12px 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: center;
}

.apps-card:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.apps-card.selected {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px var(--color-primary-light);
}

.apps-card-check {
  position: absolute;
  top: 6px;
  left: 6px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 2px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: center;
}

.apps-card.selected .apps-card-check {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.apps-card-icon {
  width: 48px;
  height: 48px;
  border-radius: 14px;
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  overflow: hidden;
}

.apps-card-icon img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.apps-card-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text);
  word-break: break-word;
  line-height: 1.3;
}

.apps-card-actions {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: auto;
}

.apps-card-btn {
  width: 30px;
  height: 30px;
  border-radius: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  transition: all var(--transition-fast);
}

.apps-card-btn:hover {
  background: var(--color-surface);
  color: var(--color-text);
  border-color: var(--color-border-light);
}

.apps-card-btn-play:hover {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

.apps-card-btn-edit:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
  border-color: var(--color-border-light);
}

.apps-card-btn-delete:hover {
  background: rgba(239, 68, 68, 0.12);
  color: var(--color-danger);
  border-color: rgba(239, 68, 68, 0.35);
}

.apps-macros-list {
  padding: 10px 14px 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.apps-macro-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  transition: background var(--transition-fast);
}

.apps-macro-item:hover {
  background: var(--color-surface-hover);
}

.apps-macro-name {
  font-size: 13px;
  font-weight: 700;
  color: var(--color-text);
}

.apps-macro-meta {
  display: block;
  margin-top: 2px;
  font-size: 11px;
  color: var(--color-text-muted);
}

.apps-macro-count {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  font-size: 11px;
  font-weight: 700;
  background: var(--color-background-tertiary);
  color: var(--color-text-secondary);
  border-radius: 999px;
}

.apps-macro-actions {
  display: flex;
  align-items: center;
  gap: 6px;
}

@media (max-width: 900px) {
  .apps-content {
    grid-template-columns: 1fr;
  }
}

.form-radio-group {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.form-radio {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.macro-apps-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.macro-app-tag {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-background-tertiary);
  color: var(--color-text-secondary);
  font-size: 12px;
  font-weight: 600;
}

/* ========================================
 * PLANNER RESPONSIVO
 * ======================================== */

@media (max-width: 1100px) {
  .planner-layout {
    flex-direction: column;
  }
  .backlog {
    width: 100%;
    min-width: 100%;
    max-height: 220px;
    border-right: none;
    border-bottom: 1px solid var(--color-border);
  }
  .week-grid {
    min-height: 0;
  }
}

@media (max-width: 800px) {
  :root {
    --period-label-width: 36px;
    --cell-min-height: 100px;
  }
  .week-grid-day-label {
    font-size: 11px;
  }
  .week-grid-day-date {
    display: none;
  }
  .card-title {
    font-size: 12px;
  }
  .card {
    padding: 8px;
  }
  .card-indicators {
    gap: 6px;
    margin-top: 4px;
  }
  .app-nav-tab span:last-child,
  .app-nav-action span:last-child {
    display: none;
  }
  .app-nav-tab,
  .app-nav-action {
    padding: 8px;
  }
  .app-nav-tabs {
    gap: 4px;
  }
}

/* ========================================
 * CARD TITLE ROW (Status icon + Title + Priority dot)
 * ======================================== */

.card-title-row {
  display: flex;
  align-items: flex-start;
  gap: 5px;
}

.card-title-row .card-title {
  flex: 1;
  min-width: 0;
}

.card-status-icon {
  flex-shrink: 0;
  width: 14px;
  height: 14px;
  margin-top: 2px;
}

.card-status-icon svg {
  width: 100%;
  height: 100%;
}

.card-priority-dot {
  flex-shrink: 0;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  margin-top: 4px;
}

.card-compact .card-status-icon {
  width: 11px;
  height: 11px;
  margin-top: 1px;
}

.card-compact .card-priority-dot {
  width: 6px;
  height: 6px;
  margin-top: 2px;
}

.card-compact .card-title-row {
  gap: 3px;
}

.card-indicator-checklist {
  color: var(--color-text-muted);
  font-weight: 600;
}

.card-indicator-checklist-done {
  color: var(--color-success);
}

.card-project-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-left: auto;
}

/* ========================================
 * CARD MODAL - PILLS & CHECKLIST
 * ======================================== */

.card-modal-pills {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.card-modal-pill {
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  font-weight: 600;
  transition: all var(--transition-fast);
  cursor: pointer;
}

.card-modal-pill:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.card-modal-pill.is-active {
  border-color: transparent;
}

.card-modal-checklist {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.card-modal-checklist-count {
  margin-left: 8px;
  font-size: 12px;
  font-weight: 700;
  color: var(--color-text-muted);
  text-transform: none;
  letter-spacing: 0;
}

.card-modal-checklist-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
}

.card-modal-checklist-item.is-done {
  opacity: 0.6;
}

.card-modal-checklist-item.is-done .card-modal-checklist-text {
  text-decoration: line-through;
  color: var(--color-text-muted);
}

.card-modal-checklist-item input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--color-primary);
  cursor: pointer;
  flex-shrink: 0;
}

.card-modal-checklist-text {
  flex: 1;
  font-size: 14px;
  color: var(--color-text);
}

.card-modal-checklist-remove {
  width: 24px;
  height: 24px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  font-size: 16px;
  transition: all var(--transition-fast);
}

.card-modal-checklist-remove:hover {
  background: rgba(239, 68, 68, 0.12);
  color: var(--color-danger);
}

.card-modal-checklist-add {
  display: flex;
  gap: 8px;
}

.card-modal-checklist-add .form-input {
  flex: 1;
  padding: 8px 12px;
  font-size: 13px;
}

.card-modal-checklist-add .btn {
  padding: 8px 14px;
}

/* ========================================
 * CALENDAR SPLIT LAYOUT (Side Panel)
 * ======================================== */

.calendar-split {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.calendar-split .calendar-layout {
  flex: 1;
  min-width: 0;
}

.calendar-side {
  width: 340px;
  min-width: 340px;
  background: var(--color-background-secondary);
  border-left: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.calendar-side-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  padding: 16px;
  border-bottom: 1px solid var(--color-border);
}

.calendar-side-header h3 {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-text);
}

.calendar-side-subtitle {
  font-size: 12px;
  color: var(--color-text-muted);
  margin-top: 2px;
}

.calendar-side-actions {
  display: flex;
  gap: 6px;
  flex-shrink: 0;
}

.calendar-side-content {
  flex: 1;
  overflow-y: auto;
  padding: 12px 16px 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.calendar-side-section-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-muted);
  margin-bottom: 8px;
}

.calendar-side-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  margin-bottom: 8px;
}

.calendar-side-item-color {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  flex-shrink: 0;
  margin-top: 3px;
}

.calendar-side-item-content {
  flex: 1;
  min-width: 0;
}

.calendar-side-item-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  line-height: 1.3;
  word-break: break-word;
}

.calendar-side-item-time {
  font-size: 12px;
  color: var(--color-text-muted);
  margin-top: 2px;
  font-variant-numeric: tabular-nums;
}

.calendar-side-item-desc {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin-top: 4px;
  line-height: 1.4;
}

.calendar-side-item-badge {
  font-size: 10px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
  background: var(--color-background-tertiary);
  margin-top: 4px;
  display: inline-block;
}

.calendar-side-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 32px 16px;
  text-align: center;
  color: var(--color-text-muted);
  font-size: 13px;
}

.calendar-side-empty svg {
  opacity: 0.3;
}

.calendar-side-empty-hint {
  font-size: 12px;
  color: var(--color-text-muted);
  opacity: 0.7;
}

/* Calendar side — new event form */
.calendar-side-form {
  padding: 14px 16px;
  border-bottom: 1px solid var(--color-border);
}

.calendar-side-form-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-muted);
  margin-bottom: 10px;
}

.calendar-side-form-fields {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.calendar-side-form-row {
  display: flex;
  gap: 6px;
  align-items: center;
}

.calendar-side-form-row .form-input {
  flex: 1;
  min-width: 0;
}

.calendar-side-color-input {
  width: 32px;
  height: 32px;
  min-width: 32px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  padding: 2px;
  cursor: pointer;
  background: transparent;
}

.calendar-side-color-input::-webkit-color-swatch-wrapper {
  padding: 0;
}

.calendar-side-color-input::-webkit-color-swatch {
  border: none;
  border-radius: 4px;
}

/* Calendar side — inline empty (lighter style) */
.calendar-side-empty-inline {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 24px 16px;
  text-align: center;
  color: var(--color-text-muted);
  font-size: 13px;
  flex: 1;
}

.calendar-side-empty-inline p {
  margin: 0;
  opacity: 0.7;
}

@media (max-width: 900px) {
  .calendar-split {
    flex-direction: column;
  }
  .calendar-side {
    width: 100%;
    min-width: 100%;
    max-height: 280px;
    border-left: none;
    border-top: 1px solid var(--color-border);
  }
}

/* ========================================
 * TODAY - SEARCH BAR
 * ======================================== */

.today-search-wrapper {
  position: relative;
}

.today-search {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  color: var(--color-text-muted);
  font-size: 14px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.today-search:hover {
  border-color: var(--color-border-light);
  background: var(--color-surface-hover);
  color: var(--color-text-secondary);
}

/* Quick Search Inline */
.quick-search-inline {
  position: relative;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.quick-search-input-wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-background-secondary);
  border-radius: 12px;
}

.quick-search-icon {
  flex-shrink: 0;
  color: var(--color-text-muted);
}

.quick-search-input {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--color-text);
  font-size: 14px;
  outline: none;
  padding: 0;
}

.quick-search-input::placeholder {
  color: var(--color-text-muted);
}

.quick-search-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 6px;
  color: var(--color-text-muted);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.quick-search-close:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.quick-search-results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  margin-top: 4px;
  max-height: 400px;
  overflow-y: auto;
  padding: 8px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.quick-search-context-menu {
  z-index: 10000;
  min-width: 180px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  padding: 4px;
  animation: scaleIn var(--transition-fast);
}

.quick-search-context-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 12px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  border-radius: 6px;
  border: none;
  background: transparent;
  transition: all var(--transition-fast);
  text-align: left;
  cursor: pointer;
}

.quick-search-context-item:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.quick-search-context-item svg {
  flex-shrink: 0;
  color: var(--color-text-muted);
}

/* ========================================
 * TODAY - PROGRESS BAR
 * ======================================== */

.today-progress {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.today-progress-bar {
  display: flex;
  height: 8px;
  border-radius: 4px;
  overflow: hidden;
  background: var(--color-border);
}

.today-progress-fill {
  transition: width var(--transition-slow);
}

.today-progress-labels {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 11px;
  font-weight: 600;
}

.today-item-badges {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}

.today-section-add-wrapper {
  position: relative;
  margin-left: auto;
  z-index: 10;
}

.today-section-add {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 6px;
  color: var(--color-text-muted);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.today-section-add:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.quick-access-dropdown {
  position: absolute;
  bottom: calc(100% + 8px);
  right: 0;
  min-width: 200px;
  max-width: 300px;
  max-height: 400px;
  overflow-y: auto;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  box-shadow: 0 -8px 24px rgba(0, 0, 0, 0.3);
  z-index: 1001;
  padding: 4px;
}

.quick-access-dropdown-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: left;
}

.quick-access-dropdown-item:hover {
  background: var(--color-surface);
}

.quick-access-dropdown-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-primary);
  flex-shrink: 0;
}

.quick-access-dropdown-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
}

.quick-access-dropdown-empty {
  padding: 12px;
  text-align: center;
  color: var(--color-text-muted);
  font-size: 13px;
}

.quick-access-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 12px;
  padding: 12px 16px 16px;
  position: relative;
  overflow: visible;
}

.quick-access-grid-compact {
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 10px;
}

.quick-access-item-wrapper {
  position: relative;
}

.quick-access-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 18px 12px;
  min-height: 95px;
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  border-radius: 12px;
  transition: all var(--transition-fast);
  cursor: pointer;
  width: 100%;
}

.quick-access-item-horizontal {
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
  gap: 10px;
  padding: 12px 14px;
  min-height: 55px;
  text-align: left;
}

.quick-access-item:hover {
  background: var(--color-border);
  border-color: var(--color-primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.quick-access-item-horizontal .quick-access-icon {
  flex-shrink: 0;
}

.quick-access-item-horizontal .quick-access-label {
  text-align: left;
  flex: 1;
}

.quick-access-context-menu {
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
  z-index: 1001;
  overflow: hidden;
  min-width: 220px;
  padding: 4px;

}

.quick-access-context-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 10px 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: left;
  color: var(--color-text);
  font-size: 14px;
}

.quick-access-context-item:hover {
  background: var(--color-surface);
  color: var(--color-danger);
}

.quick-access-context-item svg {
  color: var(--color-danger);
  flex-shrink: 0;
}

.quick-access-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-primary);
}

.quick-access-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  text-align: center;
}

.quick-access-options {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 8px;
}

.quick-access-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  transition: all var(--transition-fast);
  cursor: pointer;
  text-align: left;
}

.quick-access-option:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-primary);
}

.quick-access-option-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-primary);
  flex-shrink: 0;
}

.quick-access-option-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
}

.quick-access-empty {
  padding: 20px;
  text-align: center;
  color: var(--color-text-muted);
  font-size: 13px;
}

/* ========================================
 * WYSIWYG - HEADINGS + CODE BLOCK
 * ======================================== */

.tiptap-editor .ProseMirror h1 {
  font-size: 1.5em;
  font-weight: 700;
  margin: 16px 0 8px;
  color: var(--color-text);
  line-height: 1.3;
}

.tiptap-editor .ProseMirror h2 {
  font-size: 1.25em;
  font-weight: 700;
  margin: 14px 0 6px;
  color: var(--color-text);
  line-height: 1.3;
}

.tiptap-editor .ProseMirror h3 {
  font-size: 1.1em;
  font-weight: 700;
  margin: 12px 0 6px;
  color: var(--color-text);
  line-height: 1.3;
}

.tiptap-editor .ProseMirror pre {
  background: var(--color-background-tertiary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 12px 0;
  overflow-x: auto;
}

.tiptap-editor .ProseMirror pre code {
  background: none;
  padding: 0;
  border-radius: 0;
  font-size: 13px;
  color: var(--color-text);
}

.tiptap-editor .ProseMirror hr {
  border: none;
  border-top: 1px solid var(--color-border);
  margin: 16px 0;
}

/* ========================================
 * HABITS VIEW
 * ======================================== */

.habits-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: auto;
  padding: 20px;
  gap: 16px;
}

.habits-header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 12px;
}

.habits-header h2 {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.habits-header p {
  margin-top: 4px;
  font-size: 13px;
  color: var(--color-text-muted);
}

.habits-stats {
  display: flex;
  gap: 12px;
}

.habits-stat {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 12px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
}

.habits-stat-value {
  font-size: 20px;
  font-weight: 800;
  color: var(--color-text);
}

.habits-stat-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.4px;
}

.habits-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.habits-header-sub {
  font-size: 13px;
  color: var(--color-text-muted);
  margin: 2px 0 0 0;
}

.habits-list-scroll {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.habits-card {
  display: flex;
  flex-direction: column;
  padding: 14px 16px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-left: 4px solid var(--color-border);
  border-radius: 12px;
  transition: background var(--transition-fast);
}

.habits-card:hover {
  background: var(--color-surface-hover);
}

.habits-card.is-skipped {
  opacity: 0.6;
}

.habits-card-main {
  display: flex;
  gap: 12px;
}

.habits-card-body {
  flex: 1;
  min-width: 0;
  cursor: pointer;
}

.habits-card-title-row {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 4px;
}

.habits-card-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
}

.habits-badge {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: 4px;
  background: var(--color-background-tertiary);
  color: var(--color-text-secondary);
}

.habits-badge-streak {
  background: var(--color-primary-light);
  color: var(--color-primary);
  font-weight: 600;
}

.habits-card-meta {
  font-size: 12px;
  color: var(--color-text-muted);
  margin: 2px 0 0 0;
}

.habits-card-actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

.habits-confirm-delete {
  display: flex;
  gap: 4px;
}

/* Check Area (right side of card) */
.habits-check-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 4px 0;
  margin-left: 8px;
  flex-shrink: 0;
}

.habits-check-btn {
  width: 46px;
  height: 46px;
  border-radius: 50%;
  border: 2.5px solid var(--color-border);
  background: transparent;
  color: var(--color-text-muted);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
  position: relative;
}

.habits-check-btn:hover {
  border-color: var(--habit-color, var(--color-primary));
  color: var(--habit-color, var(--color-primary));
  background: color-mix(in srgb, var(--habit-color, var(--color-primary)) 10%, transparent);
  transform: scale(1.08);
}

.habits-check-btn:active {
  transform: scale(0.95);
}

.habits-check-btn.is-done {
  background: var(--habit-color, var(--color-primary));
  border-color: var(--habit-color, var(--color-primary));
  color: white;
  box-shadow: 0 0 12px color-mix(in srgb, var(--habit-color, var(--color-primary)) 40%, transparent);
}

.habits-check-btn.is-done:hover {
  opacity: 0.85;
  background: var(--habit-color, var(--color-primary));
}

.habits-check-btn.is-timing {
  width: 52px;
  height: 52px;
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
  animation: habits-pulse 2s ease-in-out infinite;
}

@keyframes habits-pulse {
  0%, 100% { box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-primary) 40%, transparent); }
  50% { box-shadow: 0 0 0 8px transparent; }
}

.habits-check-plus {
  font-size: 14px;
  font-weight: 700;
  letter-spacing: -0.5px;
}

.habits-check-progress {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-muted);
  white-space: nowrap;
}

.habits-check-progress.done {
  color: #22c55e;
}

.habits-check-undo {
  font-size: 10px;
  font-weight: 600;
  padding: 1px 6px;
  border-radius: 6px;
  border: 1px solid var(--color-border);
  background: transparent;
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all 0.15s;
}

.habits-check-undo:hover {
  background: rgba(239, 68, 68, 0.1);
  color: var(--color-danger);
  border-color: rgba(239, 68, 68, 0.3);
}

.habits-timer-display {
  font-size: 12px;
  font-weight: 700;
  font-variant-numeric: tabular-nums;
}

.habits-timer-start-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 26px;
  height: 26px;
  border-radius: 50%;
  border: 1px solid var(--color-border);
  background: transparent;
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all 0.15s;
}

.habits-timer-start-btn:hover {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: var(--color-primary);
}

.habits-skip-link {
  font-size: 10px;
  color: var(--color-text-muted);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  opacity: 0;
  transition: opacity 0.15s;
}

.habits-card:hover .habits-skip-link {
  opacity: 1;
}

.habits-skip-link:hover {
  color: var(--color-text-secondary);
  text-decoration: underline;
}

.habits-skipped-info {
  margin-top: 8px;
  font-size: 13px;
  color: var(--color-text-muted);
  display: flex;
  align-items: center;
  gap: 8px;
}

.habits-undo-btn {
  font-size: 11px;
  padding: 2px 8px;
}

/* 7-day week strip */
.habits-week-strip {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 10px;
}

.habits-week-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.habits-week-day-label {
  font-size: 9px;
  font-weight: 700;
  color: var(--color-text-muted);
  text-transform: uppercase;
}

.habits-week-dot {
  width: 14px;
  height: 14px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* 30-day heatmap */
.habits-heatmap-section {
  display: flex;
  align-items: center;
  gap: 12px;
}

.habits-heatmap-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.4px;
  white-space: nowrap;
}

.habits-heatmap {
  display: grid;
  grid-template-columns: repeat(15, 1fr);
  gap: 3px;
  flex: 1;
  max-width: 400px;
}

.habits-heatmap-cell {
  aspect-ratio: 1;
  border-radius: 3px;
}

/* Detail panel */
.habits-detail-panel {
  border-top: 1px solid var(--color-border);
  margin-top: 12px;
  padding-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.habits-detail-stats {
  display: flex;
  gap: 16px;
}

.habits-detail-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.habits-detail-stat-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-primary);
}

.habits-detail-stat-label {
  font-size: 10px;
  color: var(--color-text-muted);
  text-transform: uppercase;
  font-weight: 600;
}

.habits-detail-heatmap {
  display: grid;
  grid-template-columns: repeat(15, 1fr);
  gap: 3px;
  max-width: 300px;
}

.habits-detail-info {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.habits-detail-info strong {
  color: var(--color-text);
}

.habits-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 40px 20px;
  color: var(--color-text-muted);
  font-size: 13px;
  text-align: center;
  border: 1px dashed var(--color-border);
  border-radius: 14px;
}

/* ========================================
 * FINANCIAL VIEW
 * ======================================== */

.financial-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: auto;
  padding: 20px;
  gap: 16px;
}

.financial-header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 12px;
}

.financial-header h2 {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.financial-header p {
  margin-top: 4px;
  font-size: 13px;
  color: var(--color-text-muted);
}

.financial-tabs {
  display: flex;
  gap: 6px;
}

.financial-tab {
  padding: 8px 16px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 13px;
  font-weight: 600;
  transition: all var(--transition-fast);
  cursor: pointer;
}

.financial-tab:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.financial-tab.is-active {
  background: var(--color-primary-light);
  color: var(--color-primary);
  border-color: transparent;
}

.financial-content {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.financial-summary {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.financial-summary-card {
  flex: 1;
  min-width: 140px;
  padding: 14px 16px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  text-align: center;
}

.financial-summary-value {
  font-size: 20px;
  font-weight: 800;
  color: var(--color-text);
}

.financial-summary-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.4px;
  margin-top: 2px;
}

.financial-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.financial-bill,
.financial-expense {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
}

.financial-bill-info,
.financial-expense-info {
  flex: 1;
  min-width: 0;
}

.financial-bill-name,
.financial-expense-desc {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.financial-bill-meta,
.financial-expense-meta {
  font-size: 12px;
  color: var(--color-text-muted);
  margin-top: 2px;
}

.financial-amount {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-text);
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}

.financial-paid-btn {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: 2px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  transition: all var(--transition-fast);
  cursor: pointer;
}

.financial-paid-btn:hover {
  border-color: var(--color-success);
  color: var(--color-success);
}

.financial-paid-btn.is-paid {
  background: var(--color-success);
  border-color: var(--color-success);
  color: white;
}

.financial-goal {
  padding: 14px 16px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
}

.financial-goal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 8px;
}

.financial-goal-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.financial-goal-amount {
  font-size: 13px;
  color: var(--color-text-muted);
  font-variant-numeric: tabular-nums;
}

.financial-goal-bar {
  height: 8px;
  border-radius: 4px;
  background: var(--color-border);
  overflow: hidden;
}

.financial-goal-fill {
  height: 100%;
  border-radius: 4px;
  background: var(--color-primary);
  transition: width var(--transition-slow);
}

.financial-goal-meta {
  display: flex;
  justify-content: space-between;
  margin-top: 6px;
  font-size: 11px;
  color: var(--color-text-muted);
}

.financial-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 40px 20px;
  color: var(--color-text-muted);
  font-size: 13px;
  text-align: center;
  border: 1px dashed var(--color-border);
  border-radius: 14px;
}

.financial-category-badge {
  display: inline-flex;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  background: var(--color-background-tertiary);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.financial-header-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.financial-header-sub {
  font-size: 13px;
  color: var(--color-text-muted);
  margin-top: 2px;
}

.financial-content-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.financial-content-info {
  margin: 0;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.financial-section-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--color-text);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 10px 0;
}

.financial-list-section {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.financial-muted {
  font-size: 13px;
  color: var(--color-text-muted);
  margin: 0;
}

/* Financial bill with left border */
.financial-bill {
  border-left: 4px solid var(--color-border);
}

.financial-bill.is-paid {
  opacity: 0.55;
}

.financial-bill-due {
  font-size: 11px;
  font-weight: 700;
  min-width: 32px;
  text-align: center;
}

.financial-goal-deadline {
  font-size: 11px;
  color: var(--color-text-muted);
  margin-top: 2px;
}

.financial-goal-progress {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
}

.financial-goal-pct {
  font-size: 12px;
  font-weight: 600;
}

.financial-goal-bar-wrapper {
  position: relative;
  margin-bottom: 4px;
}

.financial-goal-milestones {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 8px;
  pointer-events: none;
}

.financial-goal-milestone {
  position: absolute;
  top: 0;
  width: 1px;
  height: 8px;
  background: rgba(255, 255, 255, 0.2);
}

/* Financial Overview tab */
.financial-overview {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

@media (max-width: 900px) {
  .financial-overview {
    grid-template-columns: 1fr;
  }
}

.financial-overview-left,
.financial-overview-right {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

/* Budget bars */
.financial-budget-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.financial-budget-row {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.financial-budget-row.compact {
  gap: 2px;
}

.financial-budget-row-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
}

.financial-budget-cat-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.financial-budget-label {
  flex: 1;
  color: var(--color-text);
  font-weight: 500;
}

.financial-budget-amount {
  font-weight: 600;
  color: var(--color-text);
  font-variant-numeric: tabular-nums;
}

.financial-budget-amount.over {
  color: #ef4444;
}

.financial-budget-limit {
  font-weight: 400;
  opacity: 0.5;
}

.financial-budget-track {
  height: 6px;
  border-radius: 3px;
  background: var(--color-border);
  overflow: hidden;
}

.financial-budget-fill {
  height: 100%;
  border-radius: 3px;
  transition: width var(--transition-slow);
}

.financial-budget-warning {
  font-size: 11px;
  color: #ef4444;
  font-weight: 600;
}

/* Donut chart */
.financial-donut-section {
  display: flex;
  flex-direction: column;
}

.financial-donut-wrapper {
  display: flex;
  align-items: center;
  gap: 20px;
}

.financial-donut {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  position: relative;
  flex-shrink: 0;
}

.financial-donut-hole {
  position: absolute;
  inset: 28%;
  border-radius: 50%;
  background: var(--color-background);
  display: flex;
  align-items: center;
  justify-content: center;
}

.financial-donut-total {
  font-size: 11px;
  font-weight: 700;
  color: var(--color-text);
  text-align: center;
}

.financial-donut-legend {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.financial-donut-legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.financial-donut-legend-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.financial-donut-legend-pct {
  font-weight: 600;
  color: var(--color-text);
  margin-left: auto;
}

/* Upcoming bills widget */
.financial-upcoming {
  display: flex;
  flex-direction: column;
}

.financial-upcoming-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.financial-upcoming-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 13px;
}

.financial-upcoming-due {
  font-size: 11px;
  font-weight: 700;
  min-width: 32px;
  text-align: center;
}

.financial-upcoming-name {
  flex: 1;
  color: var(--color-text);
  font-weight: 500;
}

.financial-upcoming-amount {
  font-weight: 600;
  color: var(--color-text);
  font-variant-numeric: tabular-nums;
}

/* Goals grid */
.financial-goals-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

@media (max-width: 800px) {
  .financial-goals-grid {
    grid-template-columns: 1fr;
  }
}

.financial-goals-mini {
  display: flex;
  flex-direction: column;
}

.financial-goal-mini {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px 12px;
  background: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
}

.financial-goal-mini-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.financial-goal-mini-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.financial-goal-mini-pct {
  font-size: 12px;
  font-weight: 700;
}

.financial-goal-mini-amount {
  font-size: 11px;
  color: var(--color-text-muted);
  font-variant-numeric: tabular-nums;
}

/* Month navigation */
.financial-month-nav {
  display: flex;
  align-items: center;
  gap: 6px;
}

.financial-month-label {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  min-width: 140px;
  text-align: center;
}

/* Expense groups */
.financial-expense-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.financial-expense-date-divider {
  font-size: 11px;
  font-weight: 700;
  color: var(--color-text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 6px 0 2px;
  border-bottom: 1px solid var(--color-border);
  margin-bottom: 2px;
}

.financial-expense {
  border-left: 4px solid var(--color-border);
}

.financial-expense-total {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-text);
  padding: 8px 0;
  border-top: 1px solid var(--color-border);
}

/* Icon buttons */
.btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: 1px solid transparent;
  background: transparent;
  color: var(--color-text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
  flex-shrink: 0;
}

.btn-icon:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.btn-icon:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.btn-icon-danger:hover {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.1);
}

/* Small buttons */
.btn-sm {
  font-size: 11px;
  padding: 4px 10px;
}

/* ========================================
 * CRM - PIPELINE DE VENDAS
 * ======================================== */

.crm-view {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  overflow: hidden;
  padding: 16px;
}

.crm-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
  flex-shrink: 0;
}

.crm-header-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.crm-header-title h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.crm-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
  padding: 0 8px;
  background: var(--color-primary-light);
  color: var(--color-primary);
  font-size: 12px;
  font-weight: 600;
  border-radius: 12px;
}

.crm-overdue-badge {
  font-size: 11px;
  font-weight: 500;
  color: #ef4444;
  background: rgba(239, 68, 68, 0.1);
  padding: 4px 10px;
  border-radius: 12px;
}

.crm-header-actions {
  display: flex;
  gap: 8px;
}

/* Kanban Board */
.crm-board {
  display: flex;
  gap: 12px;
  flex: 1;
  min-height: 0;
  overflow-x: auto;
  overflow-y: hidden;
}

.crm-column {
  flex: 1;
  min-width: 220px;
  display: flex;
  flex-direction: column;
  background: var(--color-backlog-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--card-border-radius);
  overflow: hidden;
  transition: all var(--transition-fast);
}

.crm-column-over {
  background: var(--color-primary-light);
  border-color: var(--color-primary);
}

/* Double Column */
.crm-double-column {
  flex: 1;
  min-width: 220px;
  display: flex;
  flex-direction: column;
  background: var(--color-backlog-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--card-border-radius);
  overflow: hidden;
  transition: all var(--transition-fast);
}

.crm-sub-column {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.crm-column-divider {
  height: 1px;
  background: var(--color-border);
  margin: 0;
}

.crm-column-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px;
  background: var(--color-backlog-header);
  border-bottom: 1px solid var(--color-border);
}

.crm-column-header h3 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0;
}

.crm-column-count {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  background: var(--color-primary-light);
  color: var(--color-primary);
  font-size: 11px;
  font-weight: 600;
  border-radius: 10px;
}

.crm-column-description {
  font-size: 11px;
  color: var(--color-text-muted);
  padding: 8px 12px;
  margin: 0;
  border-bottom: 1px solid var(--color-border);
  font-style: italic;
}

.crm-column-content {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* CRM Card */
.crm-card {
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 10px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.crm-card:hover {
  border-color: var(--color-primary);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
}

.crm-card-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 6px;
  margin-bottom: 4px;
}

.crm-card-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  line-height: 1.3;
}

.crm-card-priority {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 3px;
}

.crm-card-company {
  font-size: 11px;
  color: var(--color-text-muted);
  margin-bottom: 1px;
}

.crm-card-role {
  font-size: 10px;
  color: var(--color-text-muted);
  font-style: italic;
}

.crm-card-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 2px;
  margin-top: 6px;
}

.crm-tag {
  font-size: 9px;
  font-weight: 500;
  color: white;
  padding: 1px 5px;
  border-radius: 3px;
  display: inline-flex;
  align-items: center;
  gap: 3px;
}

.crm-tag-remove {
  background: none;
  border: none;
  color: white;
  font-size: 10px;
  cursor: pointer;
  opacity: 0.7;
  padding: 0;
  line-height: 1;
}

.crm-tag-remove:hover {
  opacity: 1;
}

.crm-card-followup {
  display: flex;
  align-items: center;
  gap: 3px;
  font-size: 10px;
  color: #ef4444;
  margin-top: 6px;
  background: rgba(239, 68, 68, 0.1);
  padding: 2px 5px;
  border-radius: 3px;
}

.crm-followup-icon {
  font-size: 10px;
}

.crm-card-last-interaction {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  color: var(--color-text-muted);
  margin-top: 6px;
  padding-top: 6px;
  border-top: 1px solid var(--color-border);
}

.crm-interaction-icon {
  font-size: 10px;
}

.crm-interaction-preview {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.crm-card-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 6px;
  gap: 4px;
}

.crm-action-btn {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text-muted);
  cursor: pointer;
  font-size: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.crm-action-btn:hover {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

/* Drag Overlay */
.crm-card-drag-overlay {
  opacity: 0.8;
}

.crm-card-overlay-content {
  background: var(--color-background);
  border: 2px solid var(--color-primary);
  border-radius: 8px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.crm-card-overlay-content strong {
  font-size: 14px;
  color: var(--color-text);
}

.crm-card-overlay-content span {
  font-size: 12px;
  color: var(--color-text-muted);
}

/* ========================================
 * CRM MODAL
 * ======================================== */

.crm-modal {
  width: 90%;
  max-width: 900px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.crm-modal-title-section {
  flex: 1;
}

.crm-modal-name {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.crm-modal-name-input {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  background: transparent;
  border: none;
  border-bottom: 2px solid var(--color-primary);
  padding: 4px 0;
  width: 100%;
  outline: none;
}

.crm-modal-company {
  font-size: 13px;
  color: var(--color-text-muted);
}

.crm-modal-company-input {
  font-size: 13px;
  color: var(--color-text-muted);
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--color-border);
  padding: 2px 0;
  width: 100%;
  outline: none;
}

/* Tabs */
.crm-modal-tabs {
  display: flex;
  gap: 2px;
  padding: 0;
  border-bottom: 1px solid var(--color-border);
  background: var(--color-surface);
  flex-shrink: 0;
}

.crm-tab {
  padding: 10px 20px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-muted);
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.crm-tab:hover {
  color: var(--color-text);
  background: var(--color-background);
}

.crm-tab.active {
  color: var(--color-primary);
  background: var(--color-background);
  border-bottom-color: var(--color-primary);
}

/* Modal Body */
.crm-details-tab,
.crm-timeline-tab,
.crm-links-tab {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  min-height: 0;
}

/* Details Tab */
.crm-detail-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 14px;
}

.crm-detail-row > label {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-muted);
  width: 90px;
  flex-shrink: 0;
}

.crm-detail-row input[type="text"],
.crm-detail-row input[type="email"],
.crm-detail-row input[type="tel"],
.crm-detail-row input[type="date"],
.crm-detail-row textarea {
  flex: 1;
  padding: 8px 12px;
  font-size: 13px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
  outline: none;
  transition: border-color var(--transition-fast);
}

.crm-detail-row input:focus,
.crm-detail-row textarea:focus {
  border-color: var(--color-primary);
}

.crm-detail-row textarea {
  min-height: 80px;
  resize: vertical;
}

.crm-priority-buttons {
  display: flex;
  gap: 6px;
}

.crm-priority-btn {
  padding: 6px 12px;
  font-size: 11px;
  font-weight: 500;
  color: white;
  background: var(--color-surface);
  border: 2px solid transparent;
  border-radius: 6px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.crm-priority-btn:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.crm-priority-btn.active {
  opacity: 1;
  border-color: currentColor;
}

.crm-stage-select {
  flex: 1;
  max-width: 300px;
  padding: 8px 12px;
  font-size: 13px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
  cursor: pointer;
  outline: none;
  transition: border-color var(--transition-fast);
}

.crm-stage-select:focus {
  border-color: var(--color-primary);
}

.crm-followup-input {
  flex: 1;
  max-width: 200px;
  padding: 8px 12px;
  font-size: 13px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
  outline: none;
  transition: border-color var(--transition-fast);
}

.crm-followup-input:focus {
  border-color: var(--color-primary);
}

/* Sections */
.crm-section {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid var(--color-border);
}

.crm-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.crm-section h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 12px 0;
}

.crm-section-header h4 {
  margin: 0;
}

.crm-form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.crm-form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.crm-form-group label {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-muted);
}

.crm-form-group input,
.crm-form-group textarea {
  padding: 8px 12px;
  font-size: 13px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
}

.crm-form-group input:focus,
.crm-form-group textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.crm-form-group textarea {
  resize: vertical;
  min-height: 60px;
}

/* Tags List */
.crm-tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.crm-no-tags {
  font-size: 12px;
  color: var(--color-text-muted);
  font-style: italic;
}

/* Timeline Tab */
.crm-timeline-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.crm-timeline-header h4 {
  margin: 0;
}

.crm-timeline {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.crm-timeline-empty {
  text-align: center;
  padding: 40px 20px;
  color: var(--color-text-muted);
  font-size: 14px;
}

.crm-timeline-item {
  display: flex;
  gap: 12px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: 8px;
  border: 1px solid var(--color-border);
}

.crm-timeline-icon {
  font-size: 18px;
  flex-shrink: 0;
}

.crm-timeline-content {
  flex: 1;
}

.crm-timeline-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}

.crm-timeline-type {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-primary);
}

.crm-timeline-date {
  font-size: 11px;
  color: var(--color-text-muted);
}

.crm-timeline-text {
  font-size: 13px;
  color: var(--color-text);
  line-height: 1.5;
}

.crm-timeline-delete {
  font-size: 11px;
  color: var(--color-text-muted);
  background: none;
  border: none;
  cursor: pointer;
  margin-top: 8px;
  padding: 0;
}

.crm-timeline-delete:hover {
  color: #ef4444;
}

/* Links Tab */
.crm-link-section {
  margin-bottom: 24px;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--color-border);
}

.crm-link-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.crm-link-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.crm-link-header h4 {
  margin: 0;
}

.crm-link-buttons {
  display: flex;
  gap: 8px;
}

.crm-notes-textarea {
  width: 100%;
  min-height: 120px;
  padding: 10px;
  font-family: inherit;
  font-size: 14px;
  line-height: 1.5;
  color: var(--color-text);
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  resize: vertical;
}

.crm-notes-textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.crm-link-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.crm-link-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background: var(--color-surface);
  border-radius: 6px;
  border: 1px solid var(--color-border);
}

.crm-link-item span {
  font-size: 13px;
  color: var(--color-text);
}

.crm-link-remove {
  font-size: 16px;
  color: var(--color-text-muted);
  background: none;
  border: none;
  cursor: pointer;
  padding: 0 4px;
}

.crm-link-remove:hover {
  color: #ef4444;
}

.crm-no-links {
  font-size: 12px;
  color: var(--color-text-muted);
  font-style: italic;
}

/* Modal Footer */
.crm-modal .modal-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-top: 1px solid var(--color-border);
  background: var(--color-background);
}

.modal-footer-right {
  display: flex;
  gap: 10px;
}

/* ========================================
 * CRM RESPONSIVO
 * ======================================== */

@media (max-width: 1400px) {
  .crm-column {
    min-width: 180px;
    max-width: 240px;
  }
}

@media (max-width: 1100px) {
  .crm-view {
    padding: 12px;
  }
  
  .crm-header {
    margin-bottom: 16px;
  }
  
  .crm-header-title h2 {
    font-size: 18px;
  }
  
  .crm-board {
    gap: 10px;
  }
  
  .crm-column {
    min-width: 160px;
    max-width: 220px;
  }
  
  .crm-column-header h3 {
    font-size: 12px;
  }
  
  .crm-card {
    padding: 8px;
  }
  
  .crm-card-name {
    font-size: 12px;
  }
}

@media (max-width: 800px) {
  .crm-view {
    padding: 8px;
  }
  
  .crm-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 12px;
  }
  
  .crm-header-title {
    flex-wrap: wrap;
  }
  
  .crm-header-title h2 {
    font-size: 16px;
  }
  
  .crm-board {
    gap: 8px;
    flex-direction: column;
    overflow-x: hidden;
    overflow-y: auto;
  }
  
  .crm-column {
    min-width: 100%;
    max-width: 100%;
    max-height: 300px;
  }
  
  .crm-column-description {
    display: none;
  }
  
  .crm-modal {
    width: 95%;
    max-height: 95vh;
  }
  
  .crm-modal-tabs {
    overflow-x: auto;
  }
  
  .crm-tab {
    padding: 8px 16px;
    font-size: 12px;
    white-space: nowrap;
  }
  
  .crm-detail-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }
  
  .crm-detail-row > label {
    width: 100%;
  }
  
  .crm-detail-row input,
  .crm-detail-row textarea,
  .crm-detail-row select {
    width: 100%;
    max-width: 100%;
  }
}

/* ========================================
 * COLORS VIEW
 * ======================================== */

.colors-manager-layout {
  display: flex;
  flex: 1;
  width: 100%;
  min-width: 0;
  height: 100%;
  min-height: 0;
  overflow: hidden;
}

.colors-sidebar {
  width: 260px;
  min-width: 260px;
  background: var(--color-backlog-bg);
  border-right: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.colors-sidebar-header {
  padding: 12px 14px;
  border-bottom: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.colors-sidebar-header h3 {
  margin: 0;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.colors-create-input,
.colors-edit-input {
  width: 100%;
  min-height: 92px;
  resize: vertical;
  font-family: var(--font-mono, monospace);
  font-size: 13px;
  color: var(--color-text);
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  padding: 10px 12px;
}

.colors-create-input:focus,
.colors-edit-input:focus {
  outline: none;
  border-color: var(--color-primary);
}

.colors-create-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  font-size: 12px;
  color: var(--color-text-muted);
}

.colors-sidebar-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow: auto;
  min-height: 0;
  padding: 10px;
}

.colors-sidebar-item {
  text-align: left;
  border: 1px solid var(--color-border);
  background: var(--color-background);
  border-radius: 8px;
  padding: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  color: var(--color-text);
}

.colors-sidebar-item:hover {
  border-color: var(--color-primary);
}

.colors-sidebar-item.is-active {
  border-color: var(--color-primary);
  background: color-mix(in srgb, var(--color-primary) 10%, var(--color-background));
}

.colors-sidebar-item-name {
  font-size: 13px;
  font-weight: 600;
}

.colors-sidebar-item-count {
  font-size: 12px;
  color: var(--color-text-muted);
}

.colors-workspace {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
  overflow: hidden;
}

.colors-workspace-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.colors-workspace-title-wrap {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.colors-workspace-title {
  margin: 0;
  font-size: 20px;
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.colors-copy-feedback {
  font-size: 12px;
  color: var(--color-text-muted);
}

.colors-workspace-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.colors-palette-canvas {
  flex: 1;
  min-height: 0;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  overflow: hidden;
  display: flex;
}

.colors-palette-columns {
  width: 100%;
  height: 100%;
  min-height: 320px;
  display: flex;
  overflow-x: auto;
}

.colors-column {
  flex: 1 0 150px;
  min-height: 320px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-right: 1px solid rgba(255, 255, 255, 0.2);
  cursor: copy;
}

.colors-column:last-child {
  border-right: none;
}

.colors-column-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}

.colors-column-hex {
  font-family: var(--font-mono, monospace);
  font-size: 24px;
  letter-spacing: 0.04em;
  color: rgba(255, 255, 255, 0.9);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.35);
}

.colors-column-copy-indicator {
  width: 30px;
  height: 30px;
  border-radius: 7px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  background: rgba(0, 0, 0, 0.22);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transform: translateY(2px);
  transition: opacity 0.15s ease, transform 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;
}

.colors-column:hover .colors-column-copy-indicator {
  opacity: 1;
  transform: translateY(0);
}

.colors-column:hover .colors-column-copy-indicator {
  background: rgba(0, 0, 0, 0.4);
  border-color: rgba(255, 255, 255, 0.6);
}

.colors-empty {
  width: 100%;
  align-self: stretch;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  padding: 20px;
  color: var(--color-text-muted);
  font-size: 13px;
}

.colors-create-modal {
  width: min(560px, 92vw);
}

.colors-create-help {
  display: block;
  margin-top: 6px;
  font-size: 12px;
  color: var(--color-text-muted);
}

@media (max-width: 768px) {
  .colors-manager-layout {
    flex-direction: column;
  }

  .colors-sidebar {
    width: 100%;
    min-width: 0;
    border-right: none;
    border-bottom: 1px solid var(--color-border);
    min-height: 180px;
  }

  .colors-workspace-toolbar {
    flex-direction: column;
    align-items: stretch;
  }

  .colors-workspace-title-wrap {
    justify-content: space-between;
  }

  .colors-column {
    flex-basis: 120px;
  }

  .colors-column-hex {
    font-size: 18px;
  }

  .colors-column-copy-indicator {
    opacity: 1;
    transform: none;
  }
}

/* ========================================
 * NOTES EDITOR - COPY ACTIONS / LINK MENU
 * ======================================== */

.notes-editor .tiptap-editor {
  position: relative;
}

.notes-editor .editor-toolbar {
  z-index: 120;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  background-clip: padding-box;
}

.notes-editor .editor-link-popover,
.notes-editor .editor-toolbar-dropdown-menu,
.notes-editor .editor-color-picker,
.notes-editor .editor-table-picker {
  z-index: 1300;
}

.notes-editor .editor-toolbar-dropdown {
  position: relative;
}

.notes-editor .editor-toolbar-dropdown .editor-link-popover {
  left: 0;
  right: auto;
  max-width: min(360px, calc(100vw - 140px));
}

.notes-editor .editor-toolbar-dropdown .editor-link-popover .form-input {
  width: min(240px, calc(100vw - 260px));
  min-width: 130px;
}

.notes-editor .tiptap-editor .ProseMirror pre,
.notes-editor .tiptap-editor .ProseMirror blockquote {
  position: relative;
}

.notes-editor .tiptap-editor .ProseMirror pre {
  padding-top: 34px;
}

.notes-editor .tiptap-editor .ProseMirror blockquote {
  padding-right: 72px;
}

.editor-copy-node-btn {
  position: absolute;
  right: 8px;
  z-index: 3;
  width: 26px;
  height: 26px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  background: var(--color-surface);
  color: var(--color-text-secondary);
  padding: 0;
  line-height: 1;
  transition: all var(--transition-fast);
}

.editor-copy-node-btn svg {
  width: 13px;
  height: 13px;
}

.editor-copy-node-btn:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background: var(--color-primary-light);
}

.editor-copy-node-btn.is-copied {
  border-color: var(--color-success, #22c55e);
  color: var(--color-success, #22c55e);
}

.editor-copy-node-btn-code {
  top: 8px;
}

.editor-copy-node-btn-quote {
  top: 50%;
  transform: translateY(-50%);
}

.editor-link-hover-menu {
  position: absolute;
  z-index: 220;
  min-width: auto;
  padding: 8px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-surface);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: row;
  gap: 8px;
}

.editor-link-hover-menu-btn {
  padding: 6px;
  border: 1px solid transparent;
  border-radius: 6px;
  color: var(--color-text);
  line-height: 1;
  transition: all var(--transition-fast);
}

.editor-link-hover-menu-btn-icon {
  width: 30px;
  height: 30px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.editor-link-hover-menu-btn svg {
  width: 14px;
  height: 14px;
}

.editor-link-hover-menu-btn:hover {
  background: var(--color-primary-light);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.editor-link-hover-menu-btn.is-copied {
  color: var(--color-success, #22c55e);
  border-color: var(--color-success, #22c55e);
}

/* ========================================
 * STUDY VIEW
 * ======================================== */

.study-view {
  flex: 1;
  min-width: 0;
  min-height: 0;
  position: relative;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 28px 24px;
  overflow: hidden;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

.study-left-stack {
  width: min(360px, 100%);
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 2;
}

.study-mini-cards {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.study-card {
  background: rgba(10, 14, 22, 0.82);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 14px;
  color: #f5f7ff;
  backdrop-filter: blur(6px);
}

.study-card-mini {
  padding: 10px 12px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.study-card-label {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.76);
}

.study-card-value {
  font-size: 18px;
  line-height: 1.2;
}

.study-session-card {
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.study-session-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
}

.study-session-date {
  display: block;
  font-size: 15px;
  margin-top: 2px;
}

.study-phase-chip {
  border-radius: 999px;
  padding: 4px 9px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.2px;
}

.study-phase-chip.focus {
  background: rgba(59, 130, 246, 0.2);
  color: #93c5fd;
}

.study-phase-chip.break {
  background: rgba(34, 197, 94, 0.2);
  color: #86efac;
}

.study-timer {
  font-size: clamp(34px, 5vw, 48px);
  font-weight: 800;
  line-height: 1;
  font-variant-numeric: tabular-nums;
  letter-spacing: 1px;
}

.study-session-actions {
  display: flex;
  gap: 8px;
}

.study-btn {
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: #f5f7ff;
  background: rgba(255, 255, 255, 0.06);
  border-radius: 8px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 600;
  transition: all var(--transition-fast);
}

.study-btn:hover {
  background: rgba(255, 255, 255, 0.14);
  border-color: rgba(255, 255, 255, 0.34);
}

.study-btn-ghost {
  background: transparent;
}

.study-btn-danger {
  color: #fda4af;
  border-color: rgba(244, 63, 94, 0.5);
}

.study-btn-danger:hover {
  color: #fecdd3;
  border-color: rgba(244, 63, 94, 0.8);
  background: rgba(244, 63, 94, 0.16);
}

.study-session-config {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.study-session-config label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  color: rgba(255, 255, 255, 0.82);
  font-size: 11px;
}

.study-session-config input[type="number"] {
  width: 100%;
  border-radius: 7px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  padding: 5px 8px;
  background: rgba(7, 10, 16, 0.7);
  color: #fff;
}

.study-mute-toggle {
  display: inline-flex !important;
  align-items: center;
  gap: 8px;
  font-size: 12px !important;
  margin-top: 2px;
}

.study-right-toolbar {
  position: absolute;
  right: 24px;
  top: 24px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 3;
}

.study-toolbar-btn {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(10, 14, 22, 0.84);
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.study-toolbar-btn svg {
  width: 18px;
  height: 18px;
}

.study-toolbar-btn:hover {
  border-color: rgba(255, 255, 255, 0.4);
  background: rgba(18, 24, 36, 0.92);
}

.study-toolbar-btn.is-active {
  border-color: rgba(96, 165, 250, 0.9);
  box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.25);
}

.study-floating-panel {
  position: absolute;
  top: 24px;
  right: 76px;
  width: min(440px, max(280px, calc(100% - 124px)));
  max-height: calc(100% - 48px);
  overflow: auto;
  z-index: 4;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.22);
  background: rgba(8, 12, 20, 0.92);
  color: #fff;
  backdrop-filter: blur(10px);
}

.study-panel-section {
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.study-panel-section h3 {
  margin: 0;
  font-size: 15px;
}

.study-input-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
  color: rgba(255, 255, 255, 0.86);
  font-size: 12px;
}

.study-input-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.study-input-row input,
.study-input-row select,
.study-panel-section textarea,
.study-panel-section input[type='text'] {
  flex: 1;
  min-width: 0;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(15, 21, 32, 0.88);
  color: #fff;
  padding: 8px 10px;
  font-size: 13px;
}

.study-panel-section textarea {
  resize: vertical;
  min-height: 64px;
}

.study-panel-section input[type='file'] {
  border: 1px dashed rgba(255, 255, 255, 0.28);
  border-radius: 8px;
  padding: 8px;
  color: rgba(255, 255, 255, 0.86);
  font-size: 12px;
  background: rgba(15, 21, 32, 0.72);
}

.study-panel-hint {
  margin: 0;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
}

.study-panel-error {
  margin: 0;
  font-size: 12px;
  color: #fca5a5;
}

.study-image-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.study-image-item {
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.18);
  padding: 0;
  line-height: 0;
}

.study-image-item img {
  width: 100%;
  height: 82px;
  object-fit: cover;
  display: block;
}

.study-image-item:hover {
  border-color: rgba(147, 197, 253, 0.9);
}

.study-audio-player {
  width: 100%;
}

.study-quote-card {
  margin: 0;
  border-left: 3px solid rgba(147, 197, 253, 0.9);
  background: rgba(255, 255, 255, 0.05);
  padding: 10px 12px;
  border-radius: 8px;
}

.study-quote-card p {
  margin: 0 0 8px;
  color: #f7fbff;
  line-height: 1.45;
}

.study-quote-card footer {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.65);
}

.study-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.study-stat-box {
  border: 1px solid rgba(255, 255, 255, 0.16);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.04);
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.study-stat-box span {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.68);
}

.study-stat-box strong {
  font-size: 21px;
  line-height: 1.2;
}

.study-goals-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 340px;
  overflow: auto;
}

.study-goals-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.study-goals-panel-header h3 {
  margin: 0;
}

.study-goals-cards {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.study-goal-card-view {
  border: 1px solid rgba(255, 255, 255, 0.16);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.04);
  padding: 9px;
  display: flex;
  flex-direction: column;
  gap: 7px;
}

.study-goal-card-view header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
}

.study-goal-card-view header strong {
  font-size: 13px;
  line-height: 1.3;
}

.study-goal-card-view p {
  margin: 0;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.78);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.study-goal-card-view footer {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.study-goal-card-view footer small {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.66);
}

.study-goal-card-status {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  padding: 3px 8px;
  font-size: 10px;
  font-weight: 700;
  white-space: nowrap;
}

.study-goal-card-status.is-todo {
  background: rgba(148, 163, 184, 0.2);
  color: #cbd5e1;
}

.study-goal-card-status.is-in_progress {
  background: rgba(59, 130, 246, 0.2);
  color: #93c5fd;
}

.study-goal-card-status.is-blocked {
  background: rgba(239, 68, 68, 0.2);
  color: #fca5a5;
}

.study-goal-card-status.is-done {
  background: rgba(34, 197, 94, 0.2);
  color: #86efac;
}

.study-goal-item {
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  padding: 9px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  background: rgba(255, 255, 255, 0.03);
}

.study-goal-main {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.study-goal-main p {
  margin: 0;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.72);
}

.study-goal-main small {
  color: rgba(255, 255, 255, 0.58);
  font-size: 11px;
}

.study-goal-main .is-done {
  text-decoration: line-through;
  opacity: 0.72;
}

.study-goal-actions {
  display: flex;
  gap: 4px;
}

.study-video-player {
  position: absolute;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  width: min(420px, calc(100vw - 48px));
  height: 236px;
  z-index: 5;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.26);
  background: #0b111d;
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
}

.study-video-player iframe {
  width: 100%;
  height: 100%;
  border: 0;
}

@media (max-width: 900px) {
  .study-view {
    padding: 14px;
  }

  .study-left-stack {
    width: 100%;
    max-width: none;
    padding-right: 54px;
  }

  .study-right-toolbar {
    position: absolute;
    right: 10px;
    top: 10px;
  }

  .study-floating-panel {
    top: 10px;
    right: 60px;
    width: min(430px, calc(100vw - 42px));
    max-height: calc(100vh - 84px);
  }

  .study-image-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .study-goals-cards {
    grid-template-columns: 1fr;
  }

  .study-video-player {
    width: min(360px, calc(100vw - 28px));
    height: 208px;
  }
}

/* ========================================
 * STUDY VIEW - UX IMPROVEMENTS
 * ======================================== */

.study-session-actions-icons {
  justify-content: flex-start;
}

.study-btn-icon {
  width: 34px;
  height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}

.study-session-config-stepper {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.study-stepper {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 4px;
}

.study-stepper-btn {
  width: 24px;
  height: 24px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  border-radius: 6px;
  background: rgba(7, 10, 16, 0.8);
  color: #fff;
  font-weight: 700;
  line-height: 1;
}

.study-stepper-btn:hover {
  border-color: rgba(255, 255, 255, 0.45);
  background: rgba(255, 255, 255, 0.08);
}

.study-file-upload-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  width: fit-content;
  border: 1px solid rgba(255, 255, 255, 0.28);
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.08);
  color: #fff;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
}

.study-file-upload-btn:hover {
  background: rgba(255, 255, 255, 0.16);
  border-color: rgba(255, 255, 255, 0.45);
}

.study-file-upload-btn input[type='file'] {
  display: none;
}

.study-media-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.study-media-item {
  border: 1px solid rgba(255, 255, 255, 0.16);
  border-radius: 10px;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  background: rgba(255, 255, 255, 0.03);
}

.study-media-item-head {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}

.study-media-item-head strong {
  display: block;
  font-size: 13px;
}

.study-media-item-actions {
  display: inline-flex;
  gap: 6px;
  align-items: flex-start;
}

.study-media-kind {
  display: inline-flex;
  margin-bottom: 4px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 700;
  padding: 2px 7px;
}

.study-media-kind.youtube {
  background: rgba(239, 68, 68, 0.2);
  color: #fca5a5;
}

.study-media-kind.audio {
  background: rgba(59, 130, 246, 0.2);
  color: #93c5fd;
}

.study-media-audio-config {
  display: flex;
  gap: 10px;
  align-items: flex-end;
}

.study-media-audio-config .study-input-group {
  flex: 1;
}

.study-goal-item {
  flex-direction: column;
  align-items: stretch;
}

.study-goal-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.study-goal-done-toggle {
  margin: 0 !important;
}

.study-goal-title-input {
  flex: 1;
  min-width: 0;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(15, 21, 32, 0.88);
  color: #fff;
  padding: 8px 10px;
  font-size: 13px;
}

.study-goal-row {
  display: flex;
  gap: 8px;
  align-items: center;
}

.study-goal-row select {
  min-width: 0;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(15, 21, 32, 0.88);
  color: #fff;
  padding: 8px 10px;
  font-size: 12px;
}

.study-goal-linked-badge {
  display: inline-flex;
  border-radius: 999px;
  background: rgba(59, 130, 246, 0.2);
  color: #93c5fd;
  padding: 3px 8px;
  font-size: 10px;
  font-weight: 700;
}

.study-goal-checklist {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.study-goal-check-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 6px 8px;
}

.study-goal-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-top: 8px;
}

.study-goal-actions small {
  color: rgba(255, 255, 255, 0.66);
  font-size: 11px;
}

.study-planning-picker {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.study-planning-picker-item {
  border: 1px solid rgba(255, 255, 255, 0.14);
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
  color: #fff;
  padding: 8px 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-align: left;
}

.study-planning-picker-item:hover {
  border-color: rgba(147, 197, 253, 0.85);
}

.study-planning-picker-item small {
  display: block;
  margin-top: 2px;
  color: rgba(255, 255, 255, 0.64);
  font-size: 11px;
}

.study-media-dock {
  left: 24px;
  right: 24px;
  bottom: 16px;
  transform: none;
  width: auto;
  height: auto;
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 0;
  overflow: hidden;
  animation: study-player-in 260ms ease-out;
}

.study-media-dock-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(7, 11, 18, 0.88);
}

.study-media-dock-topbar strong {
  font-size: 12px;
  letter-spacing: 0.1px;
}

.study-media-dock-toggle {
  width: 26px !important;
  height: 26px !important;
}

.study-media-dock-body {
  max-height: 40vh;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 10px;
  padding: 10px;
  overflow: auto;
  opacity: 1;
  transform: translateY(0);
  transition:
    max-height 240ms ease,
    opacity 180ms ease,
    transform 180ms ease,
    padding 180ms ease;
}

.study-media-dock.is-collapsed .study-media-dock-body {
  max-height: 0;
  opacity: 0;
  transform: translateY(8px);
  padding-top: 0;
  padding-bottom: 0;
  pointer-events: none;
}

.study-media-dock-item {
  background: rgba(7, 11, 18, 0.94);
  border: 1px solid rgba(255, 255, 255, 0.16);
  border-radius: 10px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.study-media-dock-item header {
  padding: 7px 9px;
  font-size: 11px;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.88);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.study-media-dock-item iframe {
  width: 100%;
  aspect-ratio: 16 / 9;
  border: 0;
}

.study-media-dock-item audio {
  width: 100%;
}

@keyframes study-player-in {
  from {
    opacity: 0;
    transform: translateY(24px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ========================================
 * STUDY VIEW - THEME OVERRIDES
 * ======================================== */

.study-view::before,
.study-view::after {
  content: '';
  position: absolute;
  inset: -20%;
  pointer-events: none;
  z-index: 0;
}

.study-view::before {
  background:
    radial-gradient(circle at 12% 20%, var(--color-primary-light) 0%, transparent 38%),
    radial-gradient(circle at 88% 12%, var(--color-primary-light) 0%, transparent 34%);
  filter: blur(26px);
  opacity: 0.8;
}

.study-view::after {
  background:
    radial-gradient(circle at 42% 80%, var(--color-primary-light) 0%, transparent 34%),
    radial-gradient(circle at 76% 72%, var(--color-primary-light) 0%, transparent 24%);
  filter: blur(38px);
  opacity: 0.55;
}

.study-view > * {
  z-index: 1;
}

.study-left-stack {
  position: relative;
}

.study-card,
.study-toolbar-btn,
.study-floating-panel,
.study-media-dock-item {
  color: var(--color-text);
  border-color: color-mix(in srgb, var(--color-border) 70%, rgba(255, 255, 255, 0.22));
  background: color-mix(in srgb, var(--color-surface) 70%, transparent);
}

.study-card-label,
.study-panel-hint,
.study-goal-actions small,
.study-planning-picker-item small,
.study-stat-box span {
  color: var(--color-text-secondary);
}

.study-btn {
  color: var(--color-text);
  border-color: color-mix(in srgb, var(--color-border) 72%, rgba(255, 255, 255, 0.2));
  background: color-mix(in srgb, var(--color-surface) 55%, transparent);
}

.study-btn:hover {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.study-toolbar-btn.is-active {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-primary) 28%, transparent);
}

.study-input-row input,
.study-input-row select,
.study-panel-section textarea,
.study-panel-section input[type='text'],
.study-goal-title-input,
.study-goal-row select {
  border-color: color-mix(in srgb, var(--color-border) 70%, rgba(255, 255, 255, 0.2));
  background: color-mix(in srgb, var(--color-background) 60%, transparent);
  color: var(--color-text);
}

.study-stepper-btn {
  border-color: color-mix(in srgb, var(--color-border) 70%, rgba(255, 255, 255, 0.25));
  background: color-mix(in srgb, var(--color-surface) 78%, transparent);
  color: var(--color-text);
}

.study-stepper-btn:hover {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.study-file-upload-btn {
  border-color: var(--color-primary);
  background: color-mix(in srgb, var(--color-primary) 18%, transparent);
  color: var(--color-text);
}

.study-file-upload-btn:hover {
  background: color-mix(in srgb, var(--color-primary) 28%, transparent);
}

.study-image-grid {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.study-image-item {
  display: flex;
  flex-direction: column;
  line-height: normal;
  border-color: color-mix(in srgb, var(--color-border) 70%, rgba(255, 255, 255, 0.18));
  background: color-mix(in srgb, var(--color-surface) 70%, transparent);
}

.study-image-item img {
  height: 88px;
}

.study-image-item span {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.2;
  text-align: left;
  padding: 6px 8px 7px;
  font-size: 11px;
  color: var(--color-text-secondary);
}

.study-pagination {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.study-pagination strong {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.study-planning-picker {
  border: 1px solid color-mix(in srgb, var(--color-border) 70%, rgba(255, 255, 255, 0.16));
  border-radius: 10px;
  padding: 8px;
  background: color-mix(in srgb, var(--color-surface) 50%, transparent);
}

.study-planning-picker-toggle {
  width: 100%;
  justify-content: space-between;
}

.study-planning-picker-item {
  border-color: color-mix(in srgb, var(--color-border) 70%, rgba(255, 255, 255, 0.15));
  background: color-mix(in srgb, var(--color-background) 52%, transparent);
  color: var(--color-text);
}

.study-planning-picker-item:hover {
  border-color: var(--color-primary);
}

.study-goal-item {
  border-color: color-mix(in srgb, var(--color-border) 72%, rgba(255, 255, 255, 0.14));
  background: color-mix(in srgb, var(--color-surface) 64%, transparent);
}

.study-goal-linked-badge {
  border: 1px solid color-mix(in srgb, var(--color-primary) 56%, transparent);
  background: color-mix(in srgb, var(--color-primary) 20%, transparent);
  color: var(--color-text);
}

.study-goal-check-item {
  border-color: color-mix(in srgb, var(--color-border) 70%, rgba(255, 255, 255, 0.12));
}

.study-goal-actions {
  margin-top: 8px;
  flex-direction: column;
  align-items: flex-start;
}

.study-media-inline-youtube iframe {
  width: 168px;
  height: 95px;
  border: 0;
  border-radius: 8px;
  pointer-events: none;
  user-select: none;
}

.study-media-inline-youtube {
  display: flex;
  align-items: center;
  gap: 10px;
}

.study-media-youtube-controls {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.study-media-youtube-controls .study-btn {
  padding: 5px 8px;
  font-size: 11px;
}

.study-media-youtube-controls .study-btn-icon {
  width: 28px;
  height: 28px;
}

.study-media-youtube-controls .study-btn.is-active {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.study-media-volume-range {
  width: 112px;
  accent-color: var(--color-primary);
}

.study-media-item.is-youtube .study-media-item-head {
  align-items: center;
}

.study-media-dock {
  border: 1px solid color-mix(in srgb, var(--color-border) 72%, rgba(255, 255, 255, 0.15));
  background: color-mix(in srgb, var(--color-surface) 48%, transparent);
  border-radius: 12px;
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 30px rgba(0, 0, 0, 0.28);
}

.study-media-dock-item header {
  color: var(--color-text);
  border-bottom-color: color-mix(in srgb, var(--color-border) 72%, rgba(255, 255, 255, 0.15));
}

.study-media-dock-topbar {
  border-bottom-color: color-mix(in srgb, var(--color-border) 72%, rgba(255, 255, 255, 0.15));
  background: color-mix(in srgb, var(--color-surface) 70%, transparent);
}

/* ========================================
 * PLAYBOOK VIEW
 * ======================================== */

.playbook-view {
  width: 100%;
  overflow: auto;
  padding-bottom: 22px;
}

.playbook-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  padding: 18px 22px 12px;
}

.playbook-header h2 {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
}

.playbook-body {
  padding: 0 22px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.playbook-subtitle {
  margin-top: 8px;
  color: var(--color-text-secondary);
  font-size: 13px;
}

.playbook-header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.playbook-icon-btn {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text-secondary);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.playbook-icon-btn:hover:not(:disabled) {
  border-color: var(--color-primary);
  color: var(--color-text);
  background: var(--color-surface-hover);
}

.playbook-icon-btn:disabled {
  opacity: 0.45;
}

.playbook-icon-btn-danger:hover:not(:disabled) {
  border-color: var(--color-danger);
  color: var(--color-danger);
}

.playbook-icon-btn-primary {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: #fff;
}

.playbook-icon-btn-primary:hover:not(:disabled) {
  background: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
  color: #fff;
}

.playbook-stats {
  margin-top: -4px;
}

.playbook-layout {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(380px, 500px);
  gap: 16px;
  align-items: start;
}

.playbook-main-col,
.playbook-side-col {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.playbook-filters-section {
  overflow: visible;
}

.playbook-filters-grid {
  padding: 14px;
  display: grid;
  grid-template-columns: minmax(0, 1.3fr) minmax(150px, 1fr) minmax(150px, 1fr);
  gap: 10px;
}

.playbook-field {
  display: grid;
  gap: 6px;
}

.playbook-field > span {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.45px;
  color: var(--color-text-muted);
}

.playbook-card-grid {
  padding: 12px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.playbook-card {
  border: 1px solid var(--color-border);
  border-radius: 11px;
  background: var(--color-surface);
  padding: 12px;
  text-align: left;
  display: grid;
  gap: 8px;
  transition: all var(--transition-fast);
}

.playbook-card:hover {
  border-color: var(--color-border-light);
  background: var(--color-surface-hover);
  transform: translateY(-1px);
}

.playbook-card.is-active {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 1px var(--color-primary-light);
}

.playbook-card-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
}

.playbook-card-top strong {
  color: var(--color-text);
  font-size: 14px;
  line-height: 1.35;
}

.playbook-card-top span {
  border: 1px solid var(--color-border);
  background: var(--color-background-tertiary);
  color: var(--color-text-secondary);
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 10px;
  font-weight: 700;
  flex-shrink: 0;
}

.playbook-card-tags {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.playbook-card-tags span {
  border: 1px solid var(--color-border);
  border-radius: 999px;
  padding: 2px 8px;
  color: var(--color-text-secondary);
  font-size: 10px;
  font-weight: 600;
}

.playbook-card p {
  color: var(--color-text-secondary);
  font-size: 12px;
  line-height: 1.5;
  word-break: break-word;
}

.playbook-editor-section,
.playbook-dialogs-section {
  overflow: hidden;
}

.playbook-editor-body,
.playbook-dialogs-body {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.playbook-editor-inline-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.playbook-textarea {
  min-height: 120px;
  resize: vertical;
  padding: 10px;
}

.playbook-dialogs-toolbar {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.playbook-dialog-list {
  display: grid;
  gap: 8px;
  max-height: 180px;
  overflow: auto;
  padding-right: 2px;
}

.playbook-dialog-item {
  width: 100%;
  border: 1px solid var(--color-border);
  border-radius: 10px;
  background: var(--color-surface);
  padding: 8px 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  text-align: left;
  color: var(--color-text);
  transition: all var(--transition-fast);
}

.playbook-dialog-item:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-light);
}

.playbook-dialog-item.is-active {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.playbook-dialog-order {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 1px solid var(--color-primary);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: var(--color-text);
  flex-shrink: 0;
}

.playbook-dialog-title {
  font-size: 13px;
  font-weight: 600;
}

.playbook-dialog-editor {
  margin-top: 4px;
  padding-top: 10px;
  border-top: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.playbook-dialog-textarea {
  min-height: 132px;
}

.playbook-variables {
  border: 1px solid var(--color-border);
  border-radius: 10px;
  background: var(--color-background);
  padding: 10px;
  display: grid;
  gap: 10px;
}

.playbook-variables h4,
.playbook-preview h4 {
  margin: 0;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-secondary);
}

.playbook-variables-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.playbook-variable-field > span {
  font-size: 10px;
}

.playbook-variable-field {
  display: grid;
  gap: 6px;
}

.playbook-variable-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

.playbook-variable-row input {
  flex: 1;
  min-width: 0;
}

.playbook-bold-toggle {
  width: 28px;
  min-width: 28px;
  height: 28px;
  border-radius: 7px;
  border: 1px solid var(--color-border);
  background: var(--color-background-secondary);
  color: var(--color-text-secondary);
  font-size: 12px;
  font-weight: 700;
}

.playbook-bold-toggle:hover {
  border-color: var(--color-primary);
}

.playbook-bold-toggle.is-active {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-text);
}

.playbook-preview {
  border: 1px solid var(--color-border);
  border-radius: 10px;
  background: var(--color-background);
  padding: 10px;
  display: grid;
  gap: 8px;
}

.playbook-preview-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.playbook-preview pre {
  margin: 0;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-background-secondary);
  padding: 10px;
  color: var(--color-text);
  font-size: 12px;
  line-height: 1.5;
  white-space: pre-wrap;
  font-family: var(--font-sans);
  max-height: 180px;
  overflow: auto;
}

.playbook-copy-status {
  color: var(--color-text-secondary);
  font-size: 12px;
}

.playbook-create-modal {
  max-width: 760px;
}

.playbook-edit-modal {
  max-width: min(1280px, 96vw);
  width: min(1280px, 96vw);
}

.playbook-create-modal-body {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.playbook-modal-body {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.playbook-edit-modal-body {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.playbook-create-modal-footer {
  justify-content: flex-end;
  gap: 10px;
}

.playbook-detail-layout {
  grid-template-columns: minmax(0, 1fr) minmax(320px, 420px);
}

.playbook-detail-navbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 12px 14px;
  border-bottom: 1px solid var(--color-border);
}

.playbook-detail-navbar-left {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.playbook-detail-title {
  font-size: 15px;
  font-weight: 700;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.playbook-detail-content {
  overflow: auto;
}

.playbook-detail-meta {
  padding: 12px 14px 0;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.playbook-detail-meta span {
  border: 1px solid var(--color-border);
  border-radius: 999px;
  padding: 3px 9px;
  color: var(--color-text-secondary);
  font-size: 11px;
  font-weight: 600;
  background: var(--color-background-secondary);
}

.playbook-content-html {
  padding: 10px 14px 16px;
  color: var(--color-text);
}

.playbook-content-html h1,
.playbook-content-html h2,
.playbook-content-html h3 {
  margin: 14px 0 8px;
  color: var(--color-text);
  line-height: 1.3;
}

.playbook-content-html h1 {
  font-size: 24px;
}

.playbook-content-html h2 {
  font-size: 20px;
}

.playbook-content-html h3 {
  font-size: 17px;
}

.playbook-content-html p {
  margin: 0 0 10px;
  color: var(--color-text-secondary);
  line-height: 1.6;
}

.playbook-content-html ul,
.playbook-content-html ol {
  margin: 0 0 10px;
  padding-left: 24px;
  color: var(--color-text-secondary);
}

.playbook-content-html li {
  margin-bottom: 4px;
}

.playbook-content-html blockquote {
  border-left: 3px solid var(--color-primary);
  margin: 10px 0;
  padding: 8px 12px;
  background: var(--color-primary-light);
  border-radius: 0 8px 8px 0;
}

.playbook-content-html code {
  font-family: 'Consolas', 'Monaco', monospace;
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 5px;
  padding: 1px 6px;
}

.playbook-content-html pre {
  margin: 10px 0;
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 10px;
  overflow: auto;
}

.playbook-content-html pre code {
  border: 0;
  background: transparent;
  padding: 0;
}

.playbook-content-html a {
  color: var(--color-primary);
}

.playbook-content-html img {
  max-width: 100%;
  border-radius: 8px;
}

.playbook-content-html table {
  width: 100%;
  border-collapse: collapse;
  margin: 10px 0;
  border: 1px solid var(--color-border);
}

.playbook-content-html table th,
.playbook-content-html table td {
  border: 1px solid var(--color-border);
  padding: 6px 8px;
}

.playbook-dialog-preview-wrap {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.playbook-dialog-detail {
  border-top: 1px solid var(--color-border);
  padding-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.playbook-dialog-detail-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.playbook-dialog-detail-head strong {
  font-size: 13px;
  color: var(--color-text);
}

.playbook-dialog-detail-content {
  border: 1px solid var(--color-border);
  border-radius: 10px;
  background: var(--color-background);
  max-height: 280px;
  overflow: auto;
}

.playbook-wysiwyg-shell {
  border: 1px solid var(--color-border);
  border-radius: 10px;
  overflow: hidden;
}

.playbook-wysiwyg-shell .editor-container {
  background: var(--color-background-secondary);
}

.playbook-wysiwyg-shell .tiptap-editor {
  max-height: 300px;
}

.playbook-wysiwyg-shell-edit .tiptap-editor {
  max-height: 360px;
}

.playbook-edit-grid {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(320px, 420px);
  gap: 12px;
  align-items: start;
}

.playbook-edit-main,
.playbook-edit-side {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.playbook-dialog-list-edit {
  max-height: 220px;
}

.playbook-detail-edit-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 0 14px 14px;
}

@media (max-width: 1300px) {
  .playbook-layout {
    grid-template-columns: minmax(0, 1fr) minmax(320px, 460px);
  }
}

@media (max-width: 1080px) {
  .playbook-layout {
    grid-template-columns: 1fr;
  }

  .playbook-card-grid {
    grid-template-columns: 1fr;
  }

  .playbook-edit-grid {
    grid-template-columns: 1fr;
  }

  .playbook-body {
    padding: 0 14px;
  }

  .playbook-header {
    padding: 16px 14px 10px;
  }
}

@media (max-width: 760px) {
  .playbook-filters-grid,
  .playbook-editor-inline-grid,
  .playbook-variables-grid {
    grid-template-columns: 1fr;
  }
}

